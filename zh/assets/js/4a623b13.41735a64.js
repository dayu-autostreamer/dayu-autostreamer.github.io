"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1193],{3674:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>i});const l=JSON.parse('{"id":"getting-started/install-lower-layer-system/install-kubeedge","title":"\u5b89\u88c5KubeEdge","description":"\u4e0b\u8f7d keadm\uff08\u4e91\u8fb9\u5171\u7528\uff09","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/03-getting-started/02-install-lower-layer-system/03-install-kubeedge.md","sourceDirName":"03-getting-started/02-install-lower-layer-system","slug":"/getting-started/install-lower-layer-system/install-kubeedge","permalink":"/zh/docs/getting-started/install-lower-layer-system/install-kubeedge","draft":false,"unlisted":false,"editUrl":null,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"\u5b89\u88c5KubeEdge","slug":"/getting-started/install-lower-layer-system/install-kubeedge","custom_edit_url":null},"sidebar":"tutorialSidebar","previous":{"title":"\u5b89\u88c5Kubernetes","permalink":"/zh/docs/getting-started/install-lower-layer-system/install-kubernetes"},"next":{"title":"\u5b89\u88c5EdgeMesh","permalink":"/zh/docs/getting-started/install-lower-layer-system/install-edgemesh"}}');var t=s(4848),d=s(8453);const r={sidebar_label:"\u5b89\u88c5KubeEdge",slug:"/getting-started/install-lower-layer-system/install-kubeedge",custom_edit_url:null},a="\u5b89\u88c5KubeEdge",c={},i=[{value:"\u4e0b\u8f7d keadm\uff08\u4e91\u8fb9\u5171\u7528\uff09",id:"\u4e0b\u8f7d-keadm\u4e91\u8fb9\u5171\u7528",level:2},{value:"\u542f\u52a8 KubeEdge\uff08\u4e91\u7aef\uff09",id:"\u542f\u52a8-kubeedge\u4e91\u7aef",level:2},{value:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09",id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7",level:3},{value:"\u542f\u52a8 cloudcore",id:"\u542f\u52a8-cloudcore",level:3},{value:"cloudcore \u914d\u7f6e",id:"cloudcore-\u914d\u7f6e",level:3},{value:"\u52a0\u5165KubeEdge\u96c6\u7fa4\uff08\u8fb9\u7aef\uff09",id:"\u52a0\u5165kubeedge\u96c6\u7fa4\u8fb9\u7aef",level:2},{value:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09",id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7-1",level:3},{value:"\u542f\u52a8 edgecore",id:"\u542f\u52a8-edgecore",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u5b89\u88c5kubeedge",children:"\u5b89\u88c5KubeEdge"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e0b\u8f7d-keadm\u4e91\u8fb9\u5171\u7528",children:"\u4e0b\u8f7d keadm\uff08\u4e91\u8fb9\u5171\u7528\uff09"}),"\n",(0,t.jsx)(n.p,{children:"keadm\u4e3b\u8981\u7528\u4e8e kubeedge \u7ba1\u7406\u3001\u5b89\u88c5\u548c\u4f7f\u7528"}),"\n",(0,t.jsxs)(n.p,{children:["\u5b98\u65b9\u53d1\u884c\u7248\u672c\u94fe\u63a5\uff1a",(0,t.jsx)(n.a,{href:"https://github.com/kubeedge/kubeedge/releases/",children:"Release KubeEdge v1.9.2 release \xb7 kubeedge/kubeedge (github.com)"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"#\u67e5\u770b\u81ea\u5df1\u7684\u67b6\u6784\nuname -a\n#\u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c\u4ee5\u53ca\u67b6\u6784\nwget https://github.com/kubeedge/kubeedge/releases/download/v1.9.2/keadm-v1.9.2-linux-amd64.tar.gz\n#\u89e3\u538b\ntar zxvf keadm-v1.9.2-linux-amd64.tar.gz\n#\u6dfb\u52a0\u6267\u884c\u6743\u9650\nchmod +x keadm-v1.9.2-linux-amd64/keadm/keadm \n#\u79fb\u52a8\u76ee\u5f55\ncp keadm-v1.9.2-linux-amd64/keadm/keadm /usr/local/bin/\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u542f\u52a8-kubeedge\u4e91\u7aef",children:"\u542f\u52a8 KubeEdge\uff08\u4e91\u7aef\uff09"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u80fd\u51fa\u73b0 ",(0,t.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/faqs#%E9%97%AE%E9%A2%98%E5%9B%9B10002-already-in-use",children:"\u95ee\u9898\u56db\uff1a10002 already in use"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7",children:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"keadm reset\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u52a8-cloudcore",children:"\u542f\u52a8 cloudcore"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7 keadm \u542f\u52a8"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"#\u6ce8\u610f\u4fee\u6539--advertise-address\u7684ip\u5730\u5740\nkeadm init --advertise-address=114.212.81.11 --kubeedge-version=1.9.2\n\n#\u6253\u5f00\u8f6c\u53d1\u8def\u7531\nkubectl get cm tunnelport -n kubeedge -o yaml\n#\u627e\u523010350 \u6216\u800510351\n#set the rule of trans\uff0c\u8bbe\u7f6e\u81ea\u5df1\u7684\u7aef\u53e3\nexport CLOUDCOREIPS=xxx.xxx.xxx.xxx\n\n# dport\u7684\u5185\u5bb9\u5bf9\u5e94tunnelport\niptables -t nat -A OUTPUT -p tcp --dport 10351 -j DNAT --to $CLOUDCOREIPS:10003\n\ncd /etc/kubeedge/\n\n# \u6216\u8005\u4ece\u7f51\u7ad9\u4e0b\u8f7d https://github.com/kubeedge/kubeedge/blob/master/build/tools/certgen.sh\nwget https://raw.githubusercontent.com/kubeedge/kubeedge/refs/heads/master/build/tools/certgen.sh\n\nbash certgen.sh stream\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cloudcore-\u914d\u7f6e",children:"cloudcore \u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"vim /etc/kubeedge/config/cloudcore.yaml\n\n# \u4fee\u6539 cloudcore.yaml \u5185\u5bb9\nmodules:\n  ..\n  cloudStream:\n    enable: true\n    streamPort: 10003\n  ..\n  dynamicController:\n    enable: true\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u91cd\u542f cloudcore\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart cloudcore.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u76f4\u63a5\u91cd\u542fcloudcore\u5931\u8d25\uff0c\u89e3\u51b3\u65b9\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u5c06\u751f\u6210\u7684cloudcore.service\u653e\u5230systemctl\u7ba1\u7406\u7684\u6587\u4ef6\u5939\u4e0b\ncp /etc/kubeedge/cloudcore.service /etc/systemd/system\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"journalctl -u cloudcore.service -xe"})," \u67e5\u770bcloudcore\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u4e14\u6ca1\u6709\u62a5\u9519"]}),"\n",(0,t.jsx)(n.h2,{id:"\u52a0\u5165kubeedge\u96c6\u7fa4\u8fb9\u7aef",children:"\u52a0\u5165KubeEdge\u96c6\u7fa4\uff08\u8fb9\u7aef\uff09"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u80fd\u51fa\u73b0 ",(0,t.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/faqs#%E9%97%AE%E9%A2%98%E4%BA%94edgecore-%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5%E5%B7%B2%E5%AD%98%E5%9C%A8",children:"\u95ee\u9898\u4e94\uff1aedgecore-\u7b26\u53f7\u94fe\u63a5\u5df2\u5b58\u5728"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u5982\u679c ",(0,t.jsx)(n.code,{children:"keadm join"})," \u5931\u8d25\u53ef\u4ee5\u4ece ",(0,t.jsx)(n.code,{children:"keadm reset"})," \u5f00\u59cb\u91cd\u65b0\u5c1d\u8bd5"]}),"\n",(0,t.jsx)(n.h3,{id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7-1",children:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u91cd\u542f\nkeadm reset\n\n# \u91cd\u65b0\u52a0\u5165\u65f6\uff0c\u62a5\u9519\u5b58\u5728\u6587\u4ef6\u5939\uff0c\u76f4\u63a5\u5220\u9664\nrm -rf /etc/kubeedge\n\n# docker\u5bb9\u5668\u5360\u7528(\u901a\u5e38\u662fmqtt)\ndocker ps -a\ndocker stop mqtt\ndocker rm mqtt\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u52a8-edgecore",children:"\u542f\u52a8 edgecore"}),"\n",(0,t.jsx)(n.p,{children:"\u542f\u52a8edgecore\u65f6\uff0c\u9700\u8981\u5728\u4e91\u7aef\u83b7\u53d6token:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"keadm gettoken\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u8fb9\u7aef\u6267\u884c:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u6ce8\u610f\u8fd9\u91cc\u662f\u8981\u52a0\u5165master\u7684IP\u5730\u5740\uff0ctoken\u662fmaster\u4e0a\u83b7\u53d6\u7684\nkeadm join --cloudcore-ipport=114.212.81.11:10000 --kubeedge-version=1.9.2 --token=9e1832528ae701aba2c4f7dfb49183ab2487e874c8090e68c19c95880cd93b50.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTk1NjU4MzF9.1B4su4QwvQy_ZCPs-PIyDT9ixsDozfN1oG4vX59tKDs\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u80fd\u51fa\u73b0 ",(0,t.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/faqs#%E9%97%AE%E9%A2%98%E4%BA%8C%E5%8D%81%E4%BA%94%E8%BE%B9%E7%AB%AFjoin%E6%8A%A5%E9%94%99",children:"\u95ee\u9898\u4e8c\u5341\u4e94\uff1a\u8fb9\u7aefjoin\u62a5\u9519"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u52a0\u5165\u540e\uff0c\u5148\u67e5\u770b\u4fe1\u606f\njournalctl -u edgecore.service -f\n"})})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var l=s(6540);const t={},d=l.createContext(t);function r(e){const n=l.useContext(d);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);