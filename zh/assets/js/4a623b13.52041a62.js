"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1193],{3674:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"getting-started/install-lower-layer-system/install-kubeedge","title":"\u5b89\u88c5KubeEdge","description":"\u4e0b\u8f7d keadm\uff08\u4e91\u8fb9\u5171\u7528\uff09","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/03-getting-started/02-install-lower-layer-system/03-install-kubeedge.md","sourceDirName":"03-getting-started/02-install-lower-layer-system","slug":"/getting-started/install-lower-layer-system/install-kubeedge","permalink":"/zh/docs/getting-started/install-lower-layer-system/install-kubeedge","draft":false,"unlisted":false,"editUrl":"https://github.com/dayu-autostreamer/dayu-autostreamer.github.io/tree/main/i18n/zh/docusaurus-plugin-content-docs/current/03-getting-started/02-install-lower-layer-system/03-install-kubeedge.md","tags":[],"version":"current","lastUpdatedBy":"onecheck","lastUpdatedAt":1769521345000,"sidebarPosition":3,"frontMatter":{"sidebar_label":"\u5b89\u88c5KubeEdge","slug":"/getting-started/install-lower-layer-system/install-kubeedge"},"sidebar":"tutorialSidebar","previous":{"title":"\u5b89\u88c5Kubernetes","permalink":"/zh/docs/getting-started/install-lower-layer-system/install-kubernetes"},"next":{"title":"\u5b89\u88c5EdgeMesh","permalink":"/zh/docs/getting-started/install-lower-layer-system/install-edgemesh"}}');var t=a(4848),l=a(8453);const r={sidebar_label:"\u5b89\u88c5KubeEdge",slug:"/getting-started/install-lower-layer-system/install-kubeedge"},c="\u5b89\u88c5KubeEdge",d={},o=[{value:"\u4e0b\u8f7d keadm\uff08\u4e91\u8fb9\u5171\u7528\uff09",id:"\u4e0b\u8f7d-keadm\u4e91\u8fb9\u5171\u7528",level:2},{value:"\u542f\u52a8 KubeEdge\uff08\u4e91\u7aef\uff09",id:"\u542f\u52a8-kubeedge\u4e91\u7aef",level:2},{value:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09",id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7",level:3},{value:"\u542f\u52a8 cloudcore",id:"\u542f\u52a8-cloudcore",level:3},{value:"cloudcore \u914d\u7f6e",id:"cloudcore-\u914d\u7f6e",level:3},{value:"\u52a0\u5165KubeEdge\u96c6\u7fa4\uff08\u8fb9\u7aef\uff09",id:"\u52a0\u5165kubeedge\u96c6\u7fa4\u8fb9\u7aef",level:2},{value:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09",id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7-1",level:3},{value:"\u542f\u52a8 edgecore",id:"\u542f\u52a8-edgecore",level:3},{value:"\u8bbe\u7f6eJetpack\u6807\u7b7e (Jetson\u8bbe\u5907\u53ef\u9009)",id:"\u8bbe\u7f6ejetpack\u6807\u7b7e-jetson\u8bbe\u5907\u53ef\u9009",level:2},{value:"\u68c0\u67e5 apiserver \u5730\u5740\uff08\u8fb9\u7aef\uff09",id:"\u68c0\u67e5-apiserver-\u5730\u5740\u8fb9\u7aef",level:3},{value:"\u521b\u5efa SA + RBAC\uff08\u4e91\u7aef\uff09",id:"\u521b\u5efa-sa--rbac\u4e91\u7aef",level:3},{value:"\u751f\u6210 kubeconfig\uff08\u4e91\u7aef\uff09",id:"\u751f\u6210-kubeconfig\u4e91\u7aef",level:3},{value:"\u521b\u5efa secret\uff08\u4e91\u7aef\uff09",id:"\u521b\u5efa-secret\u4e91\u7aef",level:3},{value:"\u90e8\u7f72 daemonset\uff08\u4e91\u7aef\uff09",id:"\u90e8\u7f72-daemonset\u4e91\u7aef",level:3}];function i(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u5b89\u88c5kubeedge",children:"\u5b89\u88c5KubeEdge"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e0b\u8f7d-keadm\u4e91\u8fb9\u5171\u7528",children:"\u4e0b\u8f7d keadm\uff08\u4e91\u8fb9\u5171\u7528\uff09"}),"\n",(0,t.jsx)(n.p,{children:"keadm\u4e3b\u8981\u7528\u4e8e kubeedge \u7ba1\u7406\u3001\u5b89\u88c5\u548c\u4f7f\u7528"}),"\n",(0,t.jsxs)(n.p,{children:["\u5b98\u65b9\u53d1\u884c\u7248\u672c\u94fe\u63a5\uff1a",(0,t.jsx)(n.a,{href:"https://github.com/kubeedge/kubeedge/releases/",children:"Release KubeEdge v1.9.2 release \xb7 kubeedge/kubeedge (github.com)"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"#\u67e5\u770b\u81ea\u5df1\u7684\u67b6\u6784\nuname -a\n#\u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c\u4ee5\u53ca\u67b6\u6784\nwget https://github.com/kubeedge/kubeedge/releases/download/v1.9.2/keadm-v1.9.2-linux-amd64.tar.gz\n#\u89e3\u538b\ntar zxvf keadm-v1.9.2-linux-amd64.tar.gz\n#\u6dfb\u52a0\u6267\u884c\u6743\u9650\nchmod +x keadm-v1.9.2-linux-amd64/keadm/keadm \n#\u79fb\u52a8\u76ee\u5f55\ncp keadm-v1.9.2-linux-amd64/keadm/keadm /usr/local/bin/\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u542f\u52a8-kubeedge\u4e91\u7aef",children:"\u542f\u52a8 KubeEdge\uff08\u4e91\u7aef\uff09"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u80fd\u51fa\u73b0 ",(0,t.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/faqs#%E9%97%AE%E9%A2%98%E5%9B%9B10002-already-in-use",children:"\u95ee\u9898\u56db\uff1a10002 already in use"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7",children:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"keadm reset\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u52a8-cloudcore",children:"\u542f\u52a8 cloudcore"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7 keadm \u542f\u52a8"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u6ce8\u610f\u4fee\u6539--advertise-address\u7684ip\u5730\u5740\nkeadm init --advertise-address=114.212.81.11 --kubeedge-version=1.9.2\n\n# \u6253\u5f00\u8f6c\u53d1\u8def\u7531\nkubectl get cm tunnelport -n kubeedge -o yaml\n# \u627e\u523010350 \u6216\u8005 10351\n\n# \u8bbe\u7f6eCLOUDCOREIPS\nexport CLOUDCOREIPS=xxx.xxx.xxx.xxx\n# \u8bbe\u7f6edport\uff08\u5185\u5bb9\u5bf9\u5e94\u4e4b\u524d\u83b7\u53d6\u7684tunnelport\uff09\niptables -t nat -A OUTPUT -p tcp --dport 10351 -j DNAT --to $CLOUDCOREIPS:10003\n\ncd /etc/kubeedge/\n\n# \u6216\u8005\u4ece\u7f51\u7ad9\u4e0b\u8f7d https://github.com/kubeedge/kubeedge/blob/master/build/tools/certgen.sh\nwget https://raw.githubusercontent.com/kubeedge/kubeedge/refs/heads/master/build/tools/certgen.sh\n\nbash certgen.sh stream\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cloudcore-\u914d\u7f6e",children:"cloudcore \u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"vim /etc/kubeedge/config/cloudcore.yaml\n\n# \u4fee\u6539 cloudcore.yaml \u5185\u5bb9\nmodules:\n  ..\n  cloudStream:\n    enable: true\n    streamPort: 10003\n  ..\n  dynamicController:\n    enable: true\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u91cd\u542f cloudcore\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart cloudcore.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u76f4\u63a5\u91cd\u542fcloudcore\u5931\u8d25\uff0c\u89e3\u51b3\u65b9\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u5c06\u751f\u6210\u7684cloudcore.service\u653e\u5230systemctl\u7ba1\u7406\u7684\u6587\u4ef6\u5939\u4e0b\ncp /etc/kubeedge/cloudcore.service /etc/systemd/system\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"journalctl -u cloudcore.service -xe"})," \u67e5\u770bcloudcore\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u4e14\u6ca1\u6709\u62a5\u9519"]}),"\n",(0,t.jsx)(n.h2,{id:"\u52a0\u5165kubeedge\u96c6\u7fa4\u8fb9\u7aef",children:"\u52a0\u5165KubeEdge\u96c6\u7fa4\uff08\u8fb9\u7aef\uff09"}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u80fd\u51fa\u73b0 ",(0,t.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/faqs#%E9%97%AE%E9%A2%98%E4%BA%94edgecore-%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5%E5%B7%B2%E5%AD%98%E5%9C%A8",children:"\u95ee\u9898\u4e94\uff1aedgecore-\u7b26\u53f7\u94fe\u63a5\u5df2\u5b58\u5728"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u5982\u679c ",(0,t.jsx)(n.code,{children:"keadm join"})," \u5931\u8d25\u53ef\u4ee5\u4ece ",(0,t.jsx)(n.code,{children:"keadm reset"})," \u5f00\u59cb\u91cd\u65b0\u5c1d\u8bd5"]}),"\n",(0,t.jsx)(n.h3,{id:"\u91cd\u7f6e\u73af\u5883\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7-1",children:"\u91cd\u7f6e\u73af\u5883\uff08\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u8df3\u8fc7\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u91cd\u542f\nkeadm reset\n\n# \u91cd\u65b0\u52a0\u5165\u65f6\uff0c\u62a5\u9519\u5b58\u5728\u6587\u4ef6\u5939\uff0c\u76f4\u63a5\u5220\u9664\nrm -rf /etc/kubeedge\n\n# docker\u5bb9\u5668\u5360\u7528(\u901a\u5e38\u662fmqtt)\ndocker ps -a\ndocker stop mqtt\ndocker rm mqtt\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u52a8-edgecore",children:"\u542f\u52a8 edgecore"}),"\n",(0,t.jsx)(n.p,{children:"\u542f\u52a8edgecore\u65f6\uff0c\u9700\u8981\u5728\u4e91\u7aef\u83b7\u53d6token:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"keadm gettoken\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u8fb9\u7aef\u6267\u884c:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u6ce8\u610f\u8fd9\u91cc\u662f\u8981\u52a0\u5165master\u7684IP\u5730\u5740\uff0ctoken\u662fmaster\u4e0a\u83b7\u53d6\u7684\nkeadm join --cloudcore-ipport=114.212.81.11:10000 --kubeedge-version=1.9.2 --token=9e1832528ae701aba2c4f7dfb49183ab2487e874c8090e68c19c95880cd93b50.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTk1NjU4MzF9.1B4su4QwvQy_ZCPs-PIyDT9ixsDozfN1oG4vX59tKDs\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u80fd\u51fa\u73b0 ",(0,t.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/faqs#%E9%97%AE%E9%A2%98%E4%BA%8C%E5%8D%81%E4%BA%94%E8%BE%B9%E7%AB%AFjoin%E6%8A%A5%E9%94%99",children:"\u95ee\u9898\u4e8c\u5341\u4e94\uff1a\u8fb9\u7aefjoin\u62a5\u9519"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u52a0\u5165\u540e\uff0c\u5148\u67e5\u770b\u4fe1\u606f\njournalctl -u edgecore.service -f\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u8bbe\u7f6ejetpack\u6807\u7b7e-jetson\u8bbe\u5907\u53ef\u9009",children:"\u8bbe\u7f6eJetpack\u6807\u7b7e (Jetson\u8bbe\u5907\u53ef\u9009)"}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u8fb9\u7f18\u8bbe\u5907\u662fJetson\u8bbe\u5907\uff0c\u60a8\u9700\u8981\u8bbe\u7f6eJetpack\u7248\u672c\u7684\u6807\u7b7e\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u68c0\u67e5-apiserver-\u5730\u5740\u8fb9\u7aef",children:"\u68c0\u67e5 apiserver \u5730\u5740\uff08\u8fb9\u7aef\uff09"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"curl"})," \u5728\u8fb9\u7f18\u8bbe\u5907\u4e0a\u68c0\u67e5 api \u670d\u52a1\u5668\u5730\u5740\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u5c06MASTER_IP\u66ff\u6362\u4e3a\u5b9e\u9645\u7684 master\u8282\u70b9\uff08\u4e91\u670d\u52a1\u5668\uff09IP\u5730\u5740\ncurl -k --max-time 3 https://MASTER_IP:6443/healthz\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5982\u679c\u54cd\u5e94\u662f ",(0,t.jsx)(n.code,{children:"ok"}),"\uff0c\u5219apiserver\u5730\u5740\u6b63\u786e\uff1b\u5982\u679c\u4e0d\u662f\uff0c\u8bf7\u68c0\u67e5\u8fb9\u7f18\u8bbe\u5907\u548c\u4e91\u4e4b\u95f4\u6216apiserver\u5730\u5740\u7684\u7f51\u7edc\u8fde\u63a5\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"\u521b\u5efa-sa--rbac\u4e91\u7aef",children:"\u521b\u5efa SA + RBAC\uff08\u4e91\u7aef\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u4e00\u4e2a\u670d\u52a1\u5e10\u6237\u548c\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a\u4ee5\u8bbe\u7f6e\u6807\u7b7e\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'kubectl -n kube-system create sa jetpack-node-labeler\n\nkubectl apply -f - <<\'YAML\'\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: jetpack-node-labeler\nrules:\n- apiGroups: [""]\n  resources: ["nodes"]\n  verbs: ["get","patch","update"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: jetpack-node-labeler\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: jetpack-node-labeler\nsubjects:\n- kind: ServiceAccount\n  name: jetpack-node-labeler\n  namespace: kube-system\nYAML\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u751f\u6210-kubeconfig\u4e91\u7aef",children:"\u751f\u6210 kubeconfig\uff08\u4e91\u7aef\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4e91\u7aef\u83b7\u53d6 token\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"SECRET=$(kubectl -n kube-system get sa jetpack-node-labeler -o jsonpath='{.secrets[0].name}')\nTOKEN=$(kubectl -n kube-system get secret \"$SECRET\" -o jsonpath='{.data.token}' | base64 -d)\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u83b7\u53d6CA\u8bc1\u4e66\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"CA_CRT=$(kubectl config view --raw -o jsonpath='{.clusters[0].cluster.certificate-authority-data}')\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u751f\u6210kubeconfig\u6587\u4ef6\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u5c06MASTER_IP\u66ff\u6362\u4e3a\u5b9e\u9645\u7684 master\u8282\u70b9\uff08\u4e91\u670d\u52a1\u5668\uff09IP\u5730\u5740\nMASTER="https://MASTER_IP:6443"\n\ncat > jetpack-labeler.kubeconfig <<EOF\napiVersion: v1\nkind: Config\nclusters:\n- name: edge-cluster\n  cluster:\n    server: ${MASTER}\n    certificate-authority-data: ${CA_CRT}\nusers:\n- name: jetpack-node-labeler\n  user:\n    token: ${TOKEN}\ncontexts:\n- name: jetpack\n  context:\n    cluster: edge-cluster\n    user: jetpack-node-labeler\ncurrent-context: jetpack\nEOF\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u521b\u5efa-secret\u4e91\u7aef",children:"\u521b\u5efa secret\uff08\u4e91\u7aef\uff09"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"kube-system"})," \u547d\u540d\u7a7a\u95f4\u4e2d\u521b\u5efa\u4e00\u4e2a secret \u4ee5\u5b58\u50a8 kubeconfig \u6587\u4ef6\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl -n kube-system create secret generic jetpack-labeler-kubeconfig \\\n  --from-file=config=jetpack-labeler.kubeconfig \\\n  --dry-run=client -o yaml | kubectl apply -f -\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u90e8\u7f72-daemonset\u4e91\u7aef",children:"\u90e8\u7f72 daemonset\uff08\u4e91\u7aef\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u90e8\u7f72 daemonset \u4ee5\u8bbe\u7f6e Jetpack \u6807\u7b7e\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'kubectl apply -f - <<\'YAML\'\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: jetpack-node-labeler\n  namespace: kube-system\nspec:\n  selector:\n    matchLabels:\n      app: jetpack-node-labeler\n  template:\n    metadata:\n      labels:\n        app: jetpack-node-labeler\n    spec:\n      serviceAccountName: jetpack-node-labeler\n      nodeSelector:\n        kubernetes.io/arch: arm64\n      tolerations:\n      - operator: Exists\n      volumes:\n      - name: host-etc\n        hostPath:\n          path: /etc\n          type: Directory\n      - name: kubeconfig\n        secret:\n          secretName: jetpack-labeler-kubeconfig\n      - name: tmp\n        emptyDir: {}\n      containers:\n      - name: labeler\n        image: bitnami/kubectl:latest\n        env:\n        - name: NODE_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: spec.nodeName\n        - name: KUBECONFIG\n          value: /kube/config\n        - name: HOME\n          value: /tmp\n        volumeMounts:\n        - name: host-etc\n          mountPath: /host/etc\n          readOnly: true\n        - name: kubeconfig\n          mountPath: /kube\n          readOnly: true\n        - name: tmp\n          mountPath: /tmp\n        command: ["/bin/sh","-c"]\n        args:\n        - |\n          set -eu\n\n          if [ ! -f /host/etc/nv_tegra_release ]; then\n            echo "Not a Jetson (no /etc/nv_tegra_release). Skip."\n            sleep 360000\n          fi\n\n          LINE="$(head -n 1 /host/etc/nv_tegra_release || true)"\n          L4T_MAJOR="$(echo "$LINE" | sed -n \'s/.*R\\([0-9]\\+\\).*/\\1/p\' | head -n1)"\n\n          JP="unknown"\n          case "$L4T_MAJOR" in\n            32) JP="4" ;;\n            35) JP="5" ;;\n            36) JP="6" ;;\n          esac\n\n          echo "node=$NODE_NAME L4T_MAJOR=$L4T_MAJOR -> JP=$JP"\n\n          kubectl label node "$NODE_NAME" \\\n            jetson.nvidia.com/jetpack.major="$JP" \\\n            jetson.nvidia.com/l4t.major="${L4T_MAJOR:-unknown}" \\\n            --overwrite\n\n          echo "label ok"\n          sleep 360000\nYAML\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u9a8c\u8bc1\u6807\u7b7e\u662f\u5426\u5df2\u6b63\u786e\u8bbe\u7f6e\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl -n kube-system get pod -l app=jetpack-node-labeler -o wide\nkubectl -n kube-system logs -l app=jetpack-node-labeler --tail=100\nkubectl get nodes -L jetson.nvidia.com/jetpack.major,jetson.nvidia.com/l4t.major\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>c});var s=a(6540);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);