"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3415],{1657:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q24-2-b2316d2cf4ee1288f5324df9a0da9876.png"},2390:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"getting-started/install-lower-layer-system/faqs","title":"FAQs","description":"\u5982\u679c\u60a8\u5728\u4f7f\u7528\u5927\u79b9\u7cfb\u7edf\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u5b9a\u4f4d\u5177\u4f53\u95ee\u9898\uff0c\u5e76\u6839\u636eFAQ\u89e3\u51b3\uff1a","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/03-getting-started/02-install-lower-layer-system/08-faqs.mdx","sourceDirName":"03-getting-started/02-install-lower-layer-system","slug":"/getting-started/install-lower-layer-system/faqs","permalink":"/zh/docs/getting-started/install-lower-layer-system/faqs","draft":false,"unlisted":false,"editUrl":"https://github.com/dayu-autostreamer/dayu-autostreamer.github.io/tree/main/docs/zh/03-getting-started/02-install-lower-layer-system/08-faqs.mdx","tags":[],"version":"current","lastUpdatedBy":"onecheck","lastUpdatedAt":1769521345000,"sidebarPosition":8,"frontMatter":{"sidebar_label":"FAQs","slug":"/getting-started/install-lower-layer-system/faqs"},"sidebar":"tutorialSidebar","previous":{"title":"\u5e38\u7528\u6307\u4ee4","permalink":"/zh/docs/getting-started/install-lower-layer-system/common-commands"},"next":{"title":"\u542f\u52a8\u5927\u79b9\u4e0a\u5c42\u7cfb\u7edf","permalink":"/zh/docs/getting-started/start-upper-layer-system"}}');var r=s(4848),d=s(8453);const i={sidebar_label:"FAQs",slug:"/getting-started/install-lower-layer-system/faqs"},t="FAQs",o={},l=[{value:"\u95ee\u9898\u4e00\uff1akube-proxy \u62a5 iptables \u95ee\u9898",id:"\u95ee\u9898\u4e00kube-proxy-\u62a5-iptables-\u95ee\u9898",level:2},{value:"\u95ee\u9898\u4e8c\uff1acalico \u548c coredns \u4e00\u76f4\u5904\u4e8e\u521d\u59cb\u5316",id:"\u95ee\u9898\u4e8ccalico-\u548c-coredns-\u4e00\u76f4\u5904\u4e8e\u521d\u59cb\u5316",level:2},{value:"\u95ee\u9898\u4e09\uff1ametrics-server\u4e00\u76f4\u65e0\u6cd5\u6210\u529f",id:"\u95ee\u9898\u4e09metrics-server\u4e00\u76f4\u65e0\u6cd5\u6210\u529f",level:2},{value:"\u95ee\u9898\u56db\uff1a10002 already in use",id:"\u95ee\u9898\u56db10002-already-in-use",level:2},{value:"\u95ee\u9898\u4e94\uff1aedgecore \u7b26\u53f7\u94fe\u63a5\u5df2\u5b58\u5728",id:"\u95ee\u9898\u4e94edgecore-\u7b26\u53f7\u94fe\u63a5\u5df2\u5b58\u5728",level:2},{value:"\u95ee\u9898\u516d\uff1a\u7f3a\u5c11 TLSStreamCertFile",id:"\u95ee\u9898\u516d\u7f3a\u5c11-tlsstreamcertfile",level:2},{value:"\u95ee\u9898\u4e03\uff1aedgemesh \u7684 log \u8fb9\u8fb9\u4e92\u8054\u6210\u529f\uff0c\u4e91\u8fb9\u65e0\u6cd5\u8fde\u63a5",id:"\u95ee\u9898\u4e03edgemesh-\u7684-log-\u8fb9\u8fb9\u4e92\u8054\u6210\u529f\u4e91\u8fb9\u65e0\u6cd5\u8fde\u63a5",level:2},{value:"\u95ee\u9898\u516b\uff1amaster \u7684gpu \u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230 gpu \u8d44\u6e90",id:"\u95ee\u9898\u516bmaster-\u7684gpu-\u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230-gpu-\u8d44\u6e90",level:2},{value:"\u95ee\u9898\u4e5d\uff1ajeston \u7684 gpu \u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230 gpu \u8d44\u6e90",id:"\u95ee\u9898\u4e5djeston-\u7684-gpu-\u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230-gpu-\u8d44\u6e90",level:2},{value:"\u95ee\u9898\u5341\uff1alc127.0.0. 53:53 no such host/connection refused",id:"\u95ee\u9898\u5341lc12700-5353-no-such-hostconnection-refused",level:2},{value:"\u95ee\u9898\u5341\u4e00\uff1a169.254.96.16 such host",id:"\u95ee\u9898\u5341\u4e001692549616-such-host",level:2},{value:"\u95ee\u9898\u5341\u4e8c\uff1a <code>kubectl logs &lt;pod-name&gt;</code> \u8d85\u65f6",id:"\u95ee\u9898\u5341\u4e8c-kubectl-logs-pod-name-\u8d85\u65f6",level:2},{value:"\u95ee\u9898\u5341\u4e09\uff1a <code>kubectl logs &lt;pod-name&gt;</code> \u5361\u4f4f",id:"\u95ee\u9898\u5341\u4e09-kubectl-logs-pod-name-\u5361\u4f4f",level:2},{value:"\u95ee\u9898\u5341\u56db\uff1aCloudCore\u62a5certficate\u9519\u8bef",id:"\u95ee\u9898\u5341\u56dbcloudcore\u62a5certficate\u9519\u8bef",level:2},{value:"\u95ee\u9898\u5341\u4e94\uff1a\u5220\u9664\u547d\u540d\u7a7a\u95f4\u5361\u5728 terminating",id:"\u95ee\u9898\u5341\u4e94\u5220\u9664\u547d\u540d\u7a7a\u95f4\u5361\u5728-terminating",level:2},{value:"\u95ee\u9898\u5341\u516d\uff1a\u5f3a\u5236\u5220\u9664 pod \u4e4b\u540e\u90e8\u7f72\u4e0d\u6210\u529f",id:"\u95ee\u9898\u5341\u516d\u5f3a\u5236\u5220\u9664-pod-\u4e4b\u540e\u90e8\u7f72\u4e0d\u6210\u529f",level:2},{value:"\u95ee\u9898\u5341\u4e03\uff1a\u5220\u9664 deployment\u3001pod \u7b49\uff0c\u5bb9\u5668\u4f9d\u65e7\u81ea\u52a8\u91cd\u542f",id:"\u95ee\u9898\u5341\u4e03\u5220\u9664-deploymentpod-\u7b49\u5bb9\u5668\u4f9d\u65e7\u81ea\u52a8\u91cd\u542f",level:2},{value:"\u95ee\u9898\u5341\u516b\uff1a\u5927\u9762\u79ef Evicted\uff08disk pressure\uff09",id:"\u95ee\u9898\u5341\u516b\u5927\u9762\u79ef-evicteddisk-pressure",level:2},{value:"\u95ee\u9898\u5341\u4e5d\uff1a\u6267\u884c iptables \u547d\u4ee4\u65f6\u53d1\u73b0\u7cfb\u7edf\u4e0d\u652f\u6301--dport\u9009\u9879",id:"\u95ee\u9898\u5341\u4e5d\u6267\u884c-iptables-\u547d\u4ee4\u65f6\u53d1\u73b0\u7cfb\u7edf\u4e0d\u652f\u6301--dport\u9009\u9879",level:2},{value:"\u95ee\u9898\u4e8c\u5341\uff1a\u6267\u884c\u5b8ckeadm join\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519token format\u9519\u8bef",id:"\u95ee\u9898\u4e8c\u5341\u6267\u884c\u5b8ckeadm-join\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519token-format\u9519\u8bef",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u4e00\uff1a\u91cd\u542fedgecore.service\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519mapping error",id:"\u95ee\u9898\u4e8c\u5341\u4e00\u91cd\u542fedgecoreservice\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519mapping-error",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u4e8c\uff1a\u91cd\u542fedgecore.service\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519connect refuse",id:"\u95ee\u9898\u4e8c\u5341\u4e8c\u91cd\u542fedgecoreservice\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519connect-refuse",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u4e09\uff1a\u90e8\u7f72metrics-service\u65f6\u9047\u5230Shutting down\u76f8\u5173\u95ee\u9898",id:"\u95ee\u9898\u4e8c\u5341\u4e09\u90e8\u7f72metrics-service\u65f6\u9047\u5230shutting-down\u76f8\u5173\u95ee\u9898",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u56db\uff1a169.254.96. 16:53: i/o timeout",id:"\u95ee\u9898\u4e8c\u5341\u56db16925496-1653-io-timeout",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u4e94\uff1a\u8fb9\u7aefjoin\u62a5\u9519",id:"\u95ee\u9898\u4e8c\u5341\u4e94\u8fb9\u7aefjoin\u62a5\u9519",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u516d\uff1afailed to build map of initial containers from runtime",id:"\u95ee\u9898\u4e8c\u5341\u516dfailed-to-build-map-of-initial-containers-from-runtime",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u4e03\uff1aCertificate has expired or is not yet valid",id:"\u95ee\u9898\u4e8c\u5341\u4e03certificate-has-expired-or-is-not-yet-valid",level:2},{value:"\u95ee\u9898\u4e8c\u5341\u516b\uff1a\u5927\u79b9\u7cfb\u7edf\u5bb9\u5668\u4e2d\u51fa\u73b0 Connection refused",id:"\u95ee\u9898\u4e8c\u5341\u516b\u5927\u79b9\u7cfb\u7edf\u5bb9\u5668\u4e2d\u51fa\u73b0-connection-refused",level:2}];function a(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components},{Details:c}=n;return c||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"faqs",children:"FAQs"})}),"\n",(0,r.jsxs)(n.admonition,{title:"\u5927\u79b9\u7cfb\u7edf\u8c03\u8bd5\u63d0\u793a",type:"tip",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5982\u679c\u60a8\u5728\u4f7f\u7528\u5927\u79b9\u7cfb\u7edf\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u5b9a\u4f4d\u5177\u4f53\u95ee\u9898\uff0c\u5e76\u6839\u636eFAQ\u89e3\u51b3\uff1a"})}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Dayu Pods:"})," \u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"kubectl get pods -n <your-dayu-namespace>"})," \u68c0\u67e5\u5927\u79b9\u6838\u5fc3\u5bb9\u5668\u7684\u72b6\u6001\uff1b\n\u5e76\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"kubectl logs <pod-name> -n <your-dayu-namespace>"})," \u548c ",(0,r.jsx)(n.code,{children:"kubectl describes pod <pod-name> -n <your-dayu-namespace>"})," \u6392\u67e5\u5f02\u5e38\u72b6\u6001\u5bb9\u5668\u7684\u65e5\u5fd7\u4fe1\u606f\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Dayu \u6838\u5fc3\u8d44\u6e90:"})," \u5982\u679c\u5bb9\u5668Pods\u5728\u672a\u77e5\u9519\u8bef\u72b6\u6001\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"kubectl get svc -n <your-dayu-namespace>"})," \u548c ",(0,r.jsx)(n.code,{children:"kubectl get deployment -n <your-dayu-namespace>"})," \u68c0\u67e5 services \u548c deployments \u7b49\u6838\u5fc3\u8d44\u6e90\u72b6\u6001\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5\u8282\u70b9\u8fde\u901a\u6027\uff1a"})," \u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"kubectl get nodes"})," \u68c0\u67e5\u4e91\u8fb9\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u8282\u70b9\u8fde\u63a5\u72b6\u6001 ('Ready' \u6216 'Not Ready')\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Sedna:"})," \u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"kubectl get pods -n sedna -owide"})," \u548c ",(0,r.jsx)(n.code,{children:"kubectl logs <sedna-pod-name> -n sedna"})," \u68c0\u67e5 Sedna gm \u7ec4\u4ef6\u548c lc \u7ec4\u4ef6\u7684\u65e5\u5fd7\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 EdgeMesh:"})," \u5982\u679c\u5927\u79b9\u7cfb\u7edf\u4e2d\u8282\u70b9\u95f4\u901a\u8baf\u963b\u585e\uff0c\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"kubectl get pods -n kubeedge -owide"})," \u548c ",(0,r.jsx)(n.code,{children:"kubectl logs <edgemesh-pod-name> -n kubeedge"}),"\u68c0\u67e5 EdgeMesh agent \u7684\u65e5\u5fd7\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Cloudcore:"})," \u5728\u4e91\u670d\u52a1\u5668\u4e0a\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"systemctl status cloudcore"})," \u6216 ",(0,r.jsx)(n.code,{children:"journalctl -u cloudcore -xe"})," \u68c0\u67e5 cloudcore \u662f\u5426\u6b63\u5e38\u8fd0\u884c\u6ca1\u6709\u62a5\u9519\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Edgecore:"})," \u5728\u8fb9\u7f18\u8282\u70b9\u4e0a\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"systemctl status edgecore"})," \u6216 ",(0,r.jsx)(n.code,{children:"journalctl -u edgecore -xe"})," \u68c0\u67e5 edgecore \u662f\u5426\u6b63\u5e38\u8fd0\u884c\u6ca1\u6709\u62a5\u9519\uff1b"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Kubelet"})," \u5728\u4e91\u670d\u52a1\u5668\u4e0a\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"systemctl status kubelet"})," \u6216 ",(0,r.jsx)(n.code,{children:"journalctl -u kubelet -xe"})," \u68c0\u67e5 k8s \u7684\u6838\u5fc3\u7ba1\u7406\u670d\u52a1 kubelet \u662f\u5426\u6b63\u5e38\u8fd0\u884c\u6ca1\u6709\u62a5\u9519"]}),(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\u68c0\u67e5 Docker:"})," \u5982\u679c ",(0,r.jsx)(n.code,{children:"kubectl"})," \u6307\u4ee4\u548c\u5176\u4ed6 k8s \u6307\u4ee4\u5747\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\uff0c\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"docker ps -a"})," \u68c0\u67e5docker\u5bb9\u5668\u72b6\u6001\uff0c\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"systemctl status docker"})," \u548c ",(0,r.jsx)(n.code,{children:"journalctl -u docker -xe"}),"\u68c0\u67e5 docker \u670d\u52a1\u72b6\u6001\u548c\u65e5\u5fd7\u3002"]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e00kube-proxy-\u62a5-iptables-\u95ee\u9898",children:"\u95ee\u9898\u4e00\uff1akube-proxy \u62a5 iptables \u95ee\u9898"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"E0627 09:28:54.054930 1 proxier.go:1598] Failed to execute iptables-restore: exit status 1 (iptables-restore: line 86 failed ) I0627 09:28:54.054962 1 proxier.go:879] Sync failed; retrying in 30s\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u76f4\u63a5\u6e05\u7406 iptables\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"iptables -F && iptables -t nat -F && iptables -t mangle -F && iptables -X\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8ccalico-\u548c-coredns-\u4e00\u76f4\u5904\u4e8e\u521d\u59cb\u5316",children:"\u95ee\u9898\u4e8c\uff1acalico \u548c coredns \u4e00\u76f4\u5904\u4e8e\u521d\u59cb\u5316"}),"\n",(0,r.jsxs)(n.p,{children:["\u7528 ",(0,r.jsx)(n.code,{children:"kubectl describe <podname>"})," \u5e94\u8be5\u4f1a\u6709 failed \u7684\u62a5\u9519\uff0c\u5927\u81f4\u5185\u5bb9\u662f\u8ddf network \u548c sandbox \u76f8\u5173\u7684\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'Failed to create pod sandbox: rpc error: code = Unknown desc = [failed to set up sandbox container "7f5b66ebecdfc2c206027a2afcb9d1a58ec5db1a6a10a91d4d60c0079236e401" network for pod "calico-kube-controllers-577f77cb5c-99t8z": networkPlugin cni failed to set up pod "calico-kube-controllers-577f77cb5c-99t8z_kube-system" network: error getting ClusterInformation: Get "https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clusterinformations/default": dial tcp 10.96.0. 1:443: i/o timeout, failed to clean up sandbox container "7f5b66ebecdfc2c206027a2afcb9d1a58ec5db1a6a10a91d4d60c0079236e401" network for pod "calico-kube-controllers-577f77cb5c-99t8z": networkPlugin cni failed to teardown pod "calico-kube-controllers-577f77cb5c-99t8z_kube-system" network: error getting ClusterInformation: Get "https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clusterinformations/default": dial tcp 10.96.0. 1:443: i/o timeout]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," \u5e94\u8be5\u4e0d\u662f\u7b2c\u4e00\u6b21\u521d\u59cb\u5316 k8s \u96c6\u7fa4\uff0c\u6240\u4ee5\u4f1a\u9047\u5230\u8fd9\u6837\u7684\u95ee\u9898\u3002\u51fa\u73b0\u7684\u539f\u56e0\u662f\u4e4b\u524d\u6ca1\u6709\u5220\u9664 k8s \u7684\u7f51\u7edc\u914d\u7f6e\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5220\u9664\u7f51\u7edc\u914d\u7f6e\nrm -rf /etc/cni/net.d/  \n# \u53ef\u80fd\u9700\u8981\u91cd\u65b0init\u4e00\u4e0b\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e09metrics-server\u4e00\u76f4\u65e0\u6cd5\u6210\u529f",children:"\u95ee\u9898\u4e09\uff1ametrics-server\u4e00\u76f4\u65e0\u6cd5\u6210\u529f"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," master \u6ca1\u6709\u52a0\u6c61\u70b9\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl taint nodes --all node-role.kubernetes.io/master node-role.kubernetes.io/master-\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u56db10002-already-in-use",children:"\u95ee\u9898\u56db\uff1a10002 already in use"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"journalctl -u cloudcore.service -xe"})," \u65f6\u770b\u5230 ",(0,r.jsx)(n.code,{children:"xxx already in use"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," \u5e94\u8be5\u662f\u4e4b\u524d\u7684\u8bb0\u5f55\u6ca1\u6709\u6e05\u7406\u5e72\u51c0\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u627e\u5230\u5360\u7528\u7aef\u53e3\u7684\u8fdb\u7a0b\uff0c\u76f4\u63a5 Kill \u5373\u53ef\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"lsof -i:xxxx\nkill xxxxx\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e94edgecore-\u7b26\u53f7\u94fe\u63a5\u5df2\u5b58\u5728",children:"\u95ee\u9898\u4e94\uff1aedgecore \u7b26\u53f7\u94fe\u63a5\u5df2\u5b58\u5728"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"execute keadm command failed:  failed to exec 'bash -c sudo ln /etc/kubeedge/edgecore.service /etc/systemd/system/edgecore.service && sudo systemctl daemon-reload && sudo systemctl enable edgecore && sudo systemctl start edgecore', err: ln: failed to create hard link '/etc/systemd/system/edgecore.service': File exists, err: exit status 1\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u5c1d\u8bd5\u521b\u5efa\u7b26\u53f7\u94fe\u63a5\u65f6\uff0c\u76ee\u6807\u8def\u5f84\u5df2\u7ecf\u5b58\u5728\uff0c\u56e0\u6b64\u65e0\u6cd5\u521b\u5efa\u3002\u8fd9\u901a\u5e38\u662f\u56e0\u4e3a ",(0,r.jsx)(n.code,{children:"edgecore.service"})," \u5df2\u7ecf\u5b58\u5728\u4e8e ",(0,r.jsx)(n.code,{children:"/etc/systemd/system/"})," \u76ee\u5f55\u4e2d\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo rm /etc/systemd/system/edgecore.service\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u516d\u7f3a\u5c11-tlsstreamcertfile",children:"\u95ee\u9898\u516d\uff1a\u7f3a\u5c11 TLSStreamCertFile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:' TLSStreamPrivateKeyFile: Invalid value: "/etc/kubeedge/certs/stream.key": TLSStreamPrivateKeyFile not exist\n12\u6708 14 23:02:23 cloud.kubeedge cloudcore[196229]:   TLSStreamCertFile: Invalid value: "/etc/kubeedge/certs/stream.crt": TLSStreamCertFile not exist\n12\u6708 14 23:02:23 cloud.kubeedge cloudcore[196229]:   TLSStreamCAFile: Invalid value: "/etc/kubeedge/ca/streamCA.crt": TLSStreamCAFile not exist\n12\u6708 14 23:02:23 cloud.kubeedge cloudcore[196229]: ]\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u67e5\u770b ",(0,r.jsx)(n.code,{children:"/etc/kubeedge"})," \u4e0b\u662f\u5426\u6709 ",(0,r.jsx)(n.code,{children:"certgen.sh"})," \u5e76\u4e14 ",(0,r.jsx)(n.code,{children:"bash certgen.sh stream"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e03edgemesh-\u7684-log-\u8fb9\u8fb9\u4e92\u8054\u6210\u529f\u4e91\u8fb9\u65e0\u6cd5\u8fde\u63a5",children:"\u95ee\u9898\u4e03\uff1aedgemesh \u7684 log \u8fb9\u8fb9\u4e92\u8054\u6210\u529f\uff0c\u4e91\u8fb9\u65e0\u6cd5\u8fde\u63a5"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6392\u67e5\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5148\u590d\u4e60\u4e00\u4e0b",(0,r.jsx)(n.strong,{children:"\u5b9a\u4f4d\u6a21\u578b"}),"\uff0c\u786e\u5b9a",(0,r.jsx)(n.strong,{children:"\u88ab\u8bbf\u95ee\u8282\u70b9"}),"\u4e0a\u7684 edgemesh-agent\u5bb9\u5668\u662f\u5426\u5b58\u5728\u3001\u662f\u5426\u5904\u4e8e\u6b63\u5e38\u8fd0\u884c\u4e2d\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q7-2",src:s(9058).A+"",width:"1440",height:"520"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4e2a\u60c5\u51b5\u662f\u975e\u5e38\u7ecf\u5e38\u51fa\u73b0\u7684\uff0c\u56e0\u4e3a master \u8282\u70b9\u4e00\u822c\u90fd\u6709\u6c61\u70b9\uff0c\u4f1a\u9a71\u9010\u5176\u4ed6 pod\uff0c\u8fdb\u800c\u5bfc\u81f4 edgemesh-agent \u90e8\u7f72\u4e0d\u4e0a\u53bb\u3002\u8fd9\u79cd\u60c5\u51b5\u53ef\u4ee5\u901a\u8fc7\u53bb\u9664\u8282\u70b9\u6c61\u70b9\uff0c\u4f7f edgemesh-agent \u90e8\u7f72\u4e0a\u53bb\u89e3\u51b3\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u8bbf\u95ee\u8282\u70b9\u548c\u88ab\u8bbf\u95ee\u8282\u70b9\u7684 edgemesh-agent \u90fd\u6b63\u5e38\u542f\u52a8\u4e86\uff0c\u4f46\u662f\u8fd8\u62a5\u8fd9\u4e2a\u9519\u8bef\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u8bbf\u95ee\u8282\u70b9\u548c\u88ab\u8bbf\u95ee\u8282\u70b9\u6ca1\u6709\u4e92\u76f8\u53d1\u73b0\u5bfc\u81f4\uff0c\u8bf7\u8fd9\u6837\u6392\u67e5\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u9996\u5148\u6bcf\u4e2a\u8282\u70b9\u4e0a\u7684 edgemesh-agent \u90fd\u5177\u6709 peer ID\uff0c\u6bd4\u5982\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"edge1:\nI'm {12D3KooWFz1dKY8L3JC8wAY6sJ5MswvPEGKysPCfcaGxFmeH7wkz: [/ip4/127.0.0.1/tcp/20006 /ip4/192.168.1.2/tcp/20006]}\n\nedge2: \nI'm {12D3KooWPpY4GqqNF3sLC397fMz5ZZfxmtMTNa1gLYFopWbHxZDt: [/ip4/127.0.0.1/tcp/20006 /ip4/192.168.1.4/tcp/20006]}\n\n\u6ce8\u610f\uff1a\na. peer ID\u662f\u6839\u636e\u8282\u70b9\u540d\u79f0\u54c8\u5e0c\u51fa\u6765\u7684\uff0c\u76f8\u540c\u7684\u8282\u70b9\u540d\u79f0\u4f1a\u54c8\u5e0c\u51fa\u76f8\u540c\u7684peer ID\nb. \u53e6\u5916\uff0c\u8282\u70b9\u540d\u79f0\u4e0d\u662f\u670d\u52a1\u5668\u540d\u79f0\uff0c\u662fk8s node name\uff0c\u8bf7\u7528kubectl get nodes\u67e5\u770b\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u8bbf\u95ee\u8282\u70b9\u548c\u88ab\u8bbf\u95ee\u8282\u70b9\u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\uff08",(0,r.jsx)(n.strong,{children:"\u6240\u6709\u8282\u70b9\u5e94\u8be5\u5177\u5907\u5185\u7f51 IP\uff0810.0.0.0/8\u3001172.16.0.0/12\u3001192.168.0.0/16"}),"\uff09\uff0c\u8bf7\u770b",(0,r.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/585749690",children:"\u5168\u7f51\u6700\u5168EdgeMesh Q&A\u624b\u518c - \u77e5\u4e4e (zhihu.com)"}),"\u4e2d\u7684",(0,r.jsx)(n.strong,{children:"\u95ee\u9898\u5341\u4e8c"}),"\uff0c\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185 edgemesh-agent \u4e92\u76f8\u53d1\u73b0\u5bf9\u65b9\u65f6\u7684\u65e5\u5fd7\u662f ",(0,r.jsx)(n.code,{children:"[MDNS] Discovery found peer: <\u88ab\u8bbf\u95ee\u7aefpeer ID: [\u88ab\u8bbf\u95ee\u7aefIP\u5217\u8868(\u53ef\u80fd\u4f1a\u5305\u542b\u4e2d\u7ee7\u8282\u70b9IP)]>"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u8bbf\u95ee\u8282\u70b9\u548c\u88ab\u8bbf\u95ee\u8282\u70b9\u8de8\u5b50\u7f51\uff0c\u8fd9\u65f6\u5019\u5e94\u8be5\u770b\u770b relayNodes \u8bbe\u7f6e\u7684\u6b63\u4e0d\u6b63\u786e\uff0c\u4e3a\u4ec0\u4e48\u4e2d\u7ee7\u8282\u70b9\u6ca1\u529e\u6cd5\u534f\u52a9\u4e24\u4e2a\u8282\u70b9\u4ea4\u6362 peer \u4fe1\u606f\u3002\u8be6\u7ec6\u6750\u6599\u8bf7\u9605\u8bfb\uff1a",(0,r.jsx)(n.a,{href:"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/4whnkMM9oOaWRsI1ICsvSA",children:"KubeEdge EdgeMesh \u9ad8\u53ef\u7528\u67b6\u6784\u8be6\u89e3"}),"\u3002\u8de8\u5b50\u7f51\u7684 edgemesh-agent \u4e92\u76f8\u53d1\u73b0\u5bf9\u65b9\u65f6\u7684\u65e5\u5fd7\u662f ",(0,r.jsx)(n.code,{children:"[DHT] Discovery found peer: <\u88ab\u8bbf\u95ee\u7aefpeer ID: [\u88ab\u8bbf\u95ee\u7aefIP\u5217\u8868(\u53ef\u80fd\u4f1a\u5305\u542b\u4e2d\u7ee7\u8282\u70b9IP)]>"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u90e8\u7f72 edgemesh \u8fdb\u884c ",(0,r.jsx)(n.code,{children:"kubectl apply -f build/agent/resources/"})," \u64cd\u4f5c\u65f6\uff0c\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"04-configmap.yaml"}),"\uff0c\u6dfb\u52a0 relayNode\uff08\u6839\u672c\u539f\u56e0\u5728\u4e8e\uff0c\u4e0d\u7b26\u5408\u201c\u8bbf\u95ee\u8282\u70b9\u548c\u88ab\u8bbf\u95ee\u8282\u70b9\u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\u201d\uff0c\u6240\u4ee5\u9700\u8981\u6dfb\u52a0 relayNode\uff09\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q7",src:s(9791).A+"",width:"888",height:"1081"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u516bmaster-\u7684gpu-\u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230-gpu-\u8d44\u6e90",children:"\u95ee\u9898\u516b\uff1amaster \u7684gpu \u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230 gpu \u8d44\u6e90"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e3b\u8981\u9488\u5bf9\u7684\u662f\u4e91\u670d\u52a1\u5668\u7684gpu\u4f7f\u7528\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"nvidia-smi"})," \u67e5\u770b\u670d\u52a1\u5668\u663e\u5361\u60c5\u51b5\uff0c\u4e91\u670d\u52a1\u5668\u4e0a\u7684k8s pod\u9700\u8981\u4f7f\u7528GPU\u9700\u8981\u989d\u5916\u7684\u63d2\u4ef6\u652f\u6301\u3002"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u53c2\u8003\u5982\u4e0b\u94fe\u63a5\uff1a\n",(0,r.jsx)(n.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#configuration",children:"Installing the NVIDIA Container Toolkit \u2014 NVIDIA Container Toolkit 1.14.3 documentation"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u6309\u4e0a\u8ff0\u5185\u5bb9\u8fdb\u884c\u914d\u7f6e\uff0c\u7136\u540e\u8fd8\u9700\u8981 ",(0,r.jsx)(n.code,{children:"vim /etc/docker/daemon.json"}),"\uff0c\u6dfb\u52a0 default-runtime\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "default-runtime": "nvidia",\n    "runtimes": {\n        "nvidia": {\n            "args": [],\n            "path": "nvidia-container-runtime"\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e5djeston-\u7684-gpu-\u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230-gpu-\u8d44\u6e90",children:"\u95ee\u9898\u4e5d\uff1ajeston \u7684 gpu \u5b58\u5728\u4f46\u662f\u627e\u4e0d\u5230 gpu \u8d44\u6e90"}),"\n",(0,r.jsxs)(n.p,{children:["\u7406\u8bba\u4e0a ",(0,r.jsx)(n.code,{children:"k8s-device-plugin"})," \u5df2\u7ecf\u652f\u6301\u4e86 tegra \u5373 jetson \u7cfb\u5217\u677f\u5b50\uff0c\u4f1a\u5728\u67e5\u770b GPU \u4e4b\u524d\u5224\u65ad\u662f\u5426\u662f tegra \u67b6\u6784\uff0c\uff0c\u4f46\u662flog\u663e\u793a\u672a\u68c0\u6d4b\u5230 tegra \u67b6\u6784\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"2024/01/04 07:43:58 Retreiving plugins.\n2024/01/04 07:43:58 Detected non-NVML platform: could not load NVML: libnvidia-ml.so.1: cannot open shared object file: No such file or directory\n2024/01/04 07:43:58 Detected non-Tegra platform: /sys/devices/soc0/family file not found\n2024/01/04 07:43:58 Incompatible platform detected\n2024/01/04 07:43:58 If this is a GPU node, did you configure the NVIDIA Container Toolkit?\n2024/01/04 07:43:58 You can check the prerequisites at: https://github.com/NVIDIA/k8s-device-plugin#prerequisites\n2024/01/04 07:43:58 You can learn how to set the runtime at: https://github.com/NVIDIA/k8s-device-plugin#quick-start\n2024/01/04 07:43:58 If this is not a GPU node, you should set up a toleration or nodeSelector to only deploy this plugin on GPU nodes\n2024/01/04 07:43:58 No devices found. Waiting indefinitely.\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q9-1",src:s(6875).A+"",width:"1624",height:"203"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dpkg -l '*nvidia*'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q9-2",src:s(5584).A+"",width:"1623",height:"795"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q9-3",src:s(5481).A+"",width:"1447",height:"386"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/NVIDIA/k8s-device-plugin/issues/377",children:"Plug in does not detect Tegra device Jetson Nano \xb7 Issue #377 \xb7 NVIDIA/k8s-device-plugin (github.com)"})}),"\n",(0,r.jsxs)(n.p,{children:["Note that looking at the initial logs that you provided you may have been using ",(0,r.jsx)(n.code,{children:"v1.7.0"})," of the NVIDIA Container Toolkit. This is quite an old version and we greatly improved our support for Tegra-based systems with the ",(0,r.jsx)(n.code,{children:"v1.10.0"})," release. It should also be noted that in order to use the GPU Device Plugin on Tegra-based systems (specifically targetting the integrated GPUs) at least ",(0,r.jsx)(n.code,{children:"v1.11.0"})," of the NVIDIA Container Toolkit is required."]}),"\n",(0,r.jsxs)(n.p,{children:["There are no Tegra-specific changes in the ",(0,r.jsx)(n.code,{children:"v1.12.0"})," release, so using the ",(0,r.jsx)(n.code,{children:"v1.11.0"})," release should be sufficient in this case."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u9700\u8981\u5347\u7ea7",(0,r.jsx)(n.strong,{children:"NVIDIA Container Toolkit"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\\n  && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \\\n    sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\\n    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list\n\nsudo apt-get update\n\nsudo apt-get install -y nvidia-container-toolkit\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341lc12700-5353-no-such-hostconnection-refused",children:"\u95ee\u9898\u5341\uff1alc127.0.0. 53:53 no such host/connection refused"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u5b89\u88c5Sedna\u9636\u6bb5\uff0c\u68c0\u67e5\u6b63\u786e\u6027\u65f6\u62a5\u9519",(0,r.jsx)(n.code,{children:"lc127.0.0. 53:53 no such host/connection refused"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," \u9519\u8bef\u539f\u7406\u53c2\u89c1",(0,r.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/585749690",children:"\u94fe\u63a5"}),"\u4e2d\u7684",(0,r.jsx)(n.strong,{children:"\u95ee\u9898\u4e94"}),"\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u9996\u5148\uff0c\u68c0\u67e5\u51c6\u5907\u9636\u6bb5\u4e2d\u7684Sedna\u5b89\u88c5\u811a\u672cinstall.sh\uff0c\u89c2\u5bdf\u5176\u4e2d\u662f\u5426\u6709Hostnetwork\u952e\u503c\u5bf9\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u4e00\u822c\u8bf4\u660e\u4e0d\u4f1a\u6709\u95ee\u9898\uff08",(0,r.jsx)(n.a,{href:"https://github.com/dayu-autostreamer/dayu-sedna",children:"dayu\u5b9a\u5236\u7248sedna\u4ed3\u5e93"}),"\u4e2d\u7684install.sh\u662f\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u7684\uff09\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u786e\u8ba4\u6ca1\u6709\u8fd9\u4e2a\u952e\u503c\u5bf9\u5374\u4f9d\u7136\u62a5\u9519\uff0c\u6309\u7167\u5982\u4e0b\u65b9\u6cd5\u6682\u65f6\u89e3\u51b3\u95ee\u9898\uff08",(0,r.jsx)(n.strong,{children:"\u4e0d\u63a8\u8350"}),"\uff09\uff1a"]}),"\n",(0,r.jsxs)(n.p,{children:["\uff081\uff09\u5728\u8fb9/\u4e91\uff08\u53d6\u51b3\u4e8e\u662f\u54ea\u4e00\u4e2asedna\u7684pod\u51fa\u95ee\u9898\u4e86\uff09\u7528",(0,r.jsx)(n.code,{children:"vim /etc/resolv.conf"}),"\u6253\u5f00\u6587\u4ef6\uff0c\u7136\u540e\u5728\u6587\u4ef6\u6700\u540e\u4e00\u884c\u6dfb\u52a0",(0,r.jsx)(n.code,{children:"nameserver 169.254.96.16"}),"\uff0c\u54ea\u6015\u6587\u4ef6\u4e2d\u672c\u6765\u5c31\u6709nameserver\u952e\u3002\u4f46\u662f\u4e00\u822c\u4e0d\u63a8\u8350\u8fd9\u6837\u505a\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\uff082\uff09\u518d\u53bb\u8fb9\u7aef\u7528",(0,r.jsx)(n.code,{children:"vim /etc/kubeedge/config/edgecore.yaml"}),"\u6253\u5f00",(0,r.jsx)(n.code,{children:"edgecore.yaml"}),"\uff0c\u67e5\u770bedge\u90e8\u5206\u7684clusterDNS\u5185\u662f\u5426\u5bf9\u5e94169.254.96.16\uff0c\u6709\u6ca1\u6709\u88ab\u8986\u76d6\u3002\u5982\u679c\u6ca1\u8986\u76d6\u5c31\u6210\u529f\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\uff083\uff09\u5728\u8fd9\u4e4b\u540e\uff0c\u5982\u679c\u662f\u8fb9\u7aef\u4e0a\u7684pod\u51fa\u95ee\u9898\uff0c\u5c31\u8981\u91cd\u88c5sedna\uff0c\u5148delete\u518dcreate\u3002"}),"\n",(0,r.jsxs)(n.h2,{id:"\u95ee\u9898\u5341\u4e001692549616-such-host",children:["\u95ee\u9898\u5341\u4e00\uff1a169.254.96.16",":no"," such host"]}),"\n",(0,r.jsx)(n.p,{children:"\u68c0\u67e5 edgemesh \u7684\u914d\u7f6e\u662f\u5426\u6b63\u786e\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u68c0\u67e5 iptables \u7684\u94fe\u7684\u987a\u5e8f\u5982",(0,r.jsx)(n.a,{href:"https://edgemesh.netlify.app/zh/advanced/hybird-proxy.html",children:"\u6df7\u5408\u4ee3\u7406 | EdgeMesh"})," \u6240\u793a"]}),"\n",(0,r.jsxs)(n.li,{children:["\u7740\u91cd\u68c0\u67e5 ",(0,r.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/install-edgemesh#%E9%85%8D%E7%BD%AEedge%E7%AB%AF%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%AB%AF",children:"EdgeMesh\u5b89\u88c5"}),"\u4e2d\u7684 ",(0,r.jsx)(n.code,{children:"clusterDNS"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"\u95ee\u9898\u5341\u4e8c-kubectl-logs-pod-name-\u8d85\u65f6",children:["\u95ee\u9898\u5341\u4e8c\uff1a ",(0,r.jsx)(n.code,{children:"kubectl logs <pod-name>"})," \u8d85\u65f6"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q12-1",src:s(3257).A+"",width:"1618",height:"42"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," \u501f\u9274 ",(0,r.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/379962934",children:"Kubernetes \u8fb9\u7f18\u8282\u70b9\u6293\u4e0d\u5230\u76d1\u63a7\u6307\u6807\uff1f\u8bd5\u8bd5\u8fd9\u4e2a\u65b9\u6cd5\uff01 - \u77e5\u4e4e (zhihu.com)"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q12-2",src:s(8114).A+"",width:"896",height:"428"})}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u53d1\u73b0\u62a5\u9519\u8bbf\u95ee\u7684\u7aef\u53e3\u5c31\u662f 10350\uff0c\u800c\u5728 kubeedge \u4e2d 10350 \u5e94\u8be5\u4f1a\u8fdb\u884c\u8f6c\u53d1\uff0c\u6240\u4ee5\u5e94\u8be5\u662f cloudcore \u7684\u8bbe\u7f6e\u95ee\u9898\u3002"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," ",(0,r.jsx)(n.a,{href:"https://kubeedge.io/docs/advanced/debug/",children:"Enable Kubectl logs/exec to debug pods on the edge | KubeEdge"})," \u6839\u636e\u8fd9\u4e2a\u94fe\u63a5\u8bbe\u7f6e\u5373\u53ef\u3002"]}),"\n",(0,r.jsxs)(n.h2,{id:"\u95ee\u9898\u5341\u4e09-kubectl-logs-pod-name-\u5361\u4f4f",children:["\u95ee\u9898\u5341\u4e09\uff1a ",(0,r.jsx)(n.code,{children:"kubectl logs <pod-name>"})," \u5361\u4f4f"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," \u53ef\u80fd\u7531\u4e8e\u4e4b\u524d ",(0,r.jsx)(n.code,{children:"kubectl logs"})," \u65f6\u672a\u7ed3\u675f\u5c31 ctrl+c \u7ed3\u675f\u4e86\u5bfc\u81f4\u540e\u7eed\u5361\u4f4f\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u91cd\u542f edgecore/cloudcore\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5728\u4e91\u7aef\nsystemctl restart cloudcore.service\n# \u5728\u8fb9\u7aef\nsystemctl restart edgecore.service\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341\u56dbcloudcore\u62a5certficate\u9519\u8bef",children:"\u95ee\u9898\u5341\u56db\uff1aCloudCore\u62a5certficate\u9519\u8bef"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q14",src:s(9737).A+"",width:"1628",height:"310"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," \u56e0\u4e3areset\u73af\u5883\u540e\u4e3b\u8282\u70b9 ",(0,r.jsx)(n.code,{children:"token"})," \u53d8\u4e86\uff0c\u4f46\u662f\u8fb9\u7f18\u8282\u70b9\u4e00\u76f4\u4ee5\u8fc7\u53bb\u7684 ",(0,r.jsx)(n.code,{children:"token"})," \u5c1d\u8bd5\u8fdb\u884c\u8fde\u63a5\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u8fb9\u7aef\u83b7\u53d6\u5e76\u4f7f\u7528\u65b0\u7684 ",(0,r.jsx)(n.code,{children:"token"})," \u8fde\u63a5\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341\u4e94\u5220\u9664\u547d\u540d\u7a7a\u95f4\u5361\u5728-terminating",children:"\u95ee\u9898\u5341\u4e94\uff1a\u5220\u9664\u547d\u540d\u7a7a\u95f4\u5361\u5728 terminating"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u65b9\u6cd5\u4e00"})," \uff08\u5f88\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\uff09"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl delete ns sedna --force --grace-period=0\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u65b9\u6cd5\u4e8c"}),"\uff1a"]}),"\n",(0,r.jsx)(n.p,{children:"\u5f00\u542f\u4e00\u4e2a\u4ee3\u7406\u7ec8\u7aef\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl proxy\n\nStarting to serve on 127.0.0.1:8001\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u518d\u5f00\u542f\u4e00\u4e2a\u64cd\u4f5c\u7ec8\u7aef:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u5c06test namespace\u7684\u914d\u7f6e\u6587\u4ef6\u8f93\u51fa\u4fdd\u5b58\nkubectl get ns sedna -o json > sedna.json\n# \u5220\u9664spec\u53castatus\u90e8\u5206\u7684\u5185\u5bb9\u8fd8\u6709metadata\u5b57\u6bb5\u540e\u7684","\u53f7\uff0c\u5207\u8bb0\uff01\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sedna.json"}),"\u4e2d\u5269\u4e0b\u5185\u5bb9\u5927\u81f4\u5982\u4e0b:"]}),"\n",(0,r.jsx)(c,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "apiVersion": "v1",\n    "kind": "Namespace",\n    "metadata": {\n        "creationTimestamp": "2023-12-14T09:12:13Z",\n        "deletionTimestamp": "2023-12-14T09:15:25Z",\n        "managedFields": [\n            {\n                "apiVersion": "v1",\n                "fieldsType": "FieldsV1",\n                "fieldsV1": {\n                    "f:status": {\n                        "f:phase": {}\n                    }\n                },\n                "manager": "kubectl-create",\n                "operation": "Update",\n                "time": "2023-12-14T09:12:13Z"\n            },\n            {\n                "apiVersion": "v1",\n                "fieldsType": "FieldsV1",\n                "fieldsV1": {\n                    "f:status": {\n                        "f:conditions": {\n                            ".": {},\n                            "k:{\\"type\\":\\"NamespaceContentRemaining\\"}": {\n                                ".": {},\n                                "f:lastTransitionTime": {},\n                                "f:message": {},\n                                "f:reason": {},\n                                "f:status": {},\n                                "f:type": {}\n                            },\n                            "k:{\\"type\\":\\"NamespaceDeletionContentFailure\\"}": {\n                                ".": {},\n                                "f:lastTransitionTime": {},\n                                "f:message": {},\n                                "f:reason": {},\n                                "f:status": {},\n                                "f:type": {}\n                            },\n                            "k:{\\"type\\":\\"NamespaceDeletionDiscoveryFailure\\"}": {\n                                ".": {},\n                                "f:lastTransitionTime": {},\n                                "f:message": {},\n                                "f:reason": {},\n                                "f:status": {},\n                                "f:type": {}\n                            },\n                            "k:{\\"type\\":\\"NamespaceDeletionGroupVersionParsingFailure\\"}": {\n                                ".": {},\n                                "f:lastTransitionTime": {},\n                                "f:message": {},\n                                "f:reason": {},\n                                "f:status": {},\n                                "f:type": {}\n                            },\n                            "k:{\\"type\\":\\"NamespaceFinalizersRemaining\\"}": {\n                                ".": {},\n                                "f:lastTransitionTime": {},\n                                "f:message": {},\n                                "f:reason": {},\n                                "f:status": {},\n                                "f:type": {}\n                            }\n                        }\n                    }\n                },\n                "manager": "kube-controller-manager",\n                "operation": "Update",\n                "time": "2023-12-14T09:15:30Z"\n            }\n        ],\n        "name": "sedna",\n        "resourceVersion": "3351515",\n        "uid": "99cb8afb-a4c1-45e6-960d-ff1b4894773d"\n    }\n}\n'})})}),"\n",(0,r.jsx)(n.p,{children:"\u8c03\u7528\u63a5\u53e3\u5220\u9664\uff1a"}),"\n",(0,r.jsxs)(c,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -k -H "Content-Type: application/json" -X PUT --data-binary @sedna.json http://127.0.0.1:8001/api/v1/namespaces/sedna/finalize\n'})})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'{\n  "kind": "Namespace",\n  "apiVersion": "v1",\n  "metadata": {\n    "name": "sedna",\n    "uid": "99cb8afb-a4c1-45e6-960d-ff1b4894773d",\n    "resourceVersion": "3351515",\n    "creationTimestamp": "2023-12-14T09:12:13Z",\n    "deletionTimestamp": "2023-12-14T09:15:25Z",\n    "managedFields": [\n      {\n        "manager": "curl",\n        "operation": "Update",\n        "apiVersion": "v1",\n        "time": "2023-12-14T09:42:38Z",\n        "fieldsType": "FieldsV1",\n        "fieldsV1": {"f:status":{"f:phase":{}}}\n      }\n    ]\n  },\n  "spec": {\n\n  },\n  "status": {\n    "phase": "Terminating",\n    "conditions": [\n      {\n        "type": "NamespaceDeletionDiscoveryFailure",\n        "status": "True",\n        "lastTransitionTime": "2023-12-14T09:15:30Z",\n        "reason": "DiscoveryFailed",\n        "message": "Discovery failed for some groups, 1 failing: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request"\n      },\n      {\n        "type": "NamespaceDeletionGroupVersionParsingFailure",\n        "status": "False",\n        "lastTransitionTime": "2023-12-14T09:15:30Z",\n        "reason": "ParsedGroupVersions",\n        "message": "All legacy kube types successfully parsed"\n      },\n      {\n        "type": "NamespaceDeletionContentFailure",\n        "status": "False",\n        "lastTransitionTime": "2023-12-14T09:15:30Z",\n        "reason": "ContentDeleted",\n        "message": "All content successfully deleted, may be waiting on finalization"\n      },\n      {\n        "type": "NamespaceContentRemaining",\n        "status": "False",\n        "lastTransitionTime": "2023-12-14T09:15:30Z",\n        "reason": "ContentRemoved",\n        "message": "All content successfully removed"\n      },\n      {\n        "type": "NamespaceFinalizersRemaining",\n        "status": "False",\n        "lastTransitionTime": "2023-12-14T09:15:30Z",\n        "reason": "ContentHasNoFinalizers",\n        "message": "All content-preserving finalizers finished"\n      }\n    ]\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341\u516d\u5f3a\u5236\u5220\u9664-pod-\u4e4b\u540e\u90e8\u7f72\u4e0d\u6210\u529f",children:"\u95ee\u9898\u5341\u516d\uff1a\u5f3a\u5236\u5220\u9664 pod \u4e4b\u540e\u90e8\u7f72\u4e0d\u6210\u529f"}),"\n",(0,r.jsxs)(n.p,{children:["edge \u7684 pod \u662f\u7531 deployment \u8fdb\u884c\u521b\u5efa\uff0c\u4f46\u662f\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"kubectl delete deploy <deploy-name>"})," \u5220\u9664 deployment \u540e\uff0cpod \u4e00\u76f4\u5361\u5728\u4e86 terminating \u72b6\u6001\uff0c\u91c7\u7528 ",(0,r.jsx)(n.code,{children:"kubectl delete pod edgeworker-deployment-7g5hs-58dffc5cd7-b77wz --force --grace-period=0"})," \u547d\u4ee4\u8fdb\u884c\u5220\u9664\uff0c\n\u91cd\u65b0\u90e8\u7f72\u65f6\u5019\u53d1\u73b0 ",(0,r.jsx)(n.code,{children:"assigned to edge"})," \u7684 pod \u90fd\u5361\u5728 ",(0,r.jsx)(n.code,{children:"pending"})," \u72b6\u6001\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u56e0\u4e3a ",(0,r.jsx)(n.code,{children:"--force"})," \u662f\u4e0d\u4f1a\u5b9e\u9645\u7ec8\u6b62\u8fd0\u884c\u7684\uff0c\u6240\u4ee5\u672c\u8eab\u539f\u6765\u7684 docker \u53ef\u80fd\u8fd8\u5728\u8fd0\u884c\uff0c\u73b0\u5728\u7684\u505a\u6cd5\u662f\u624b\u52a8\u53bb\u5bf9\u5e94\u7684\u8fb9\u7f18\u8282\u70b9\u4e0a\u5220\u9664\u5bf9\u5e94\u7684\u5bb9\u5668\uff08\u5305\u62ec pause\uff0c\u5173\u4e8e pause \u53ef\u4ee5\u770b\u8fd9\u7bc7\u6587\u7ae0",(0,r.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/464712164",children:"\u5927\u767d\u8bdd K8S\uff0803\uff09\uff1a\u4ece Pause \u5bb9\u5668\u7406\u89e3 Pod \u7684\u672c\u8d28 - \u77e5\u4e4e (zhihu.com)"}),"\uff09\uff0c\u7136\u540e\u91cd\u542f edgecore: ",(0,r.jsx)(n.code,{children:"systemctl restart edgecore.service"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341\u4e03\u5220\u9664-deploymentpod-\u7b49\u5bb9\u5668\u4f9d\u65e7\u81ea\u52a8\u91cd\u542f",children:"\u95ee\u9898\u5341\u4e03\uff1a\u5220\u9664 deployment\u3001pod \u7b49\uff0c\u5bb9\u5668\u4f9d\u65e7\u81ea\u52a8\u91cd\u542f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:" journalctl -u edgecore.service  -f\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q17",src:s(4594).A+"",width:"1557",height:"148"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u91cd\u542f edgecore"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"systemctl restart edgecore.service\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341\u516b\u5927\u9762\u79ef-evicteddisk-pressure",children:"\u95ee\u9898\u5341\u516b\uff1a\u5927\u9762\u79ef Evicted\uff08disk pressure\uff09"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["node \u4e0a\u7684 kubelet \u8d1f\u8d23\u91c7\u96c6\u8d44\u6e90\u5360\u7528\u6570\u636e\uff0c\u5e76\u548c\u9884\u5148\u8bbe\u7f6e\u7684 threshold \u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u8d85\u8fc7 threshold \u503c\uff0ckubelet \u4f1a\u6740\u6389\u4e00\u4e9b Pod \u6765\u56de\u6536\u76f8\u5173\u8d44\u6e90\uff0c",(0,r.jsx)(n.a,{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fkubernetes.io%2Fdocs%2Ftasks%2Fadminister-cluster%2Fout-of-resource%2F",children:"K8s\u5b98\u7f51\u89e3\u8bfbkubernetes\u914d\u7f6e\u8d44\u6e90\u4e0d\u8db3\u5904\u7406"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u9ed8\u8ba4\u542f\u52a8\u65f6\uff0cnode \u7684\u53ef\u7528\u7a7a\u95f4\u4f4e\u4e8e15%\u7684\u65f6\u5019\uff0c\u8be5\u8282\u70b9\u4e0a\u8bb2\u4f1a\u6267\u884c eviction \u64cd\u4f5c\uff0c\u7531\u4e8e\u78c1\u76d8\u5df2\u7ecf\u8fbe\u5230\u4e8685%,\u5728\u600e\u4e48\u9a71\u9010\u4e5f\u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\u5c31\u4f1a\u4e00\u76f4\u91cd\u542f\uff0cPod \u72b6\u6001\u4e5f\u662f pending \u4e2d\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u6839\u672c\u89e3\u51b3\u65b9\u6848\u662f\u589e\u5927\u78c1\u76d8\u53ef\u7528\u7a7a\u95f4\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u9700\u8981\u4e34\u65f6\u89e3\u51b3\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539k8s\u914d\u7f6e\u6765\u66f4\u6539threshold\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u589e\u52a0\u4f20\u53c2\u6570,\u6dfb\u52a0\u6b64\u914d\u7f6e\u9879",(0,r.jsx)(n.code,{children:"--eviction-hard=nodefs.available<5%"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"systemctl status kubelet\n\n\u25cf kubelet.service - kubelet: The Kubernetes Node Agent\n     Loaded: loaded (/lib/systemd/system/kubelet.service; enabled; vendor preset: enabled)\n    Drop-In: /etc/systemd/system/kubelet.service.d\n             \u2514\u250010-kubeadm.conf\n     Active: active (running) since Fri 2023-12-15 09:17:50 CST; 5min ago\n       Docs: https://kubernetes.io/docs/home/\n   Main PID: 1070209 (kubelet)\n      Tasks: 59 (limit: 309024)\n     Memory: 67.2M\n     CGroup: /system.slice/kubelet.service\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u6240\u5728\u4f4d\u7f6e\u662f ",(0,r.jsx)(n.code,{children:"/etc/systemd/system/kubelet.service.d"}),"\uff0c\u914d\u7f6e\u6587\u4ef6\u662f ",(0,r.jsx)(n.code,{children:"10-kubeadm.conf"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'vim /etc/systemd/system/kubelet.service.d/10-kubeadm.conf\n\n[Service]\nEnvironment="KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf"\nEnvironment="KUBELET_CONFIG_ARGS=--config=/var/lib/kubelet/config.yaml --eviction-hard=nodefs.available<5%"\n\n# \u6700\u540e\u6dfb\u52a0\u4e0a--eviction-hard=nodefs.available<5%\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542f kubelet\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"systemctl daemon-reload\nsystemctl  restart kubelet\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e4b\u540e\u53ef\u4ee5\u6b63\u5e38\u90e8\u7f72(\u53ea\u662f\u5e94\u6025\u63aa\u65bd\uff0c\u78c1\u76d8\u7a7a\u95f4\u9700\u8981\u518d\u6e05\u7406)\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u5341\u4e5d\u6267\u884c-iptables-\u547d\u4ee4\u65f6\u53d1\u73b0\u7cfb\u7edf\u4e0d\u652f\u6301--dport\u9009\u9879",children:"\u95ee\u9898\u5341\u4e5d\uff1a\u6267\u884c iptables \u547d\u4ee4\u65f6\u53d1\u73b0\u7cfb\u7edf\u4e0d\u652f\u6301--dport\u9009\u9879"}),"\n",(0,r.jsxs)(n.p,{children:["\u6267\u884c\u547d\u4ee4\uff1a",(0,r.jsx)(n.code,{children:"iptables -t nat -A OUTPUT -p tcp --dport 10351 -j DNAT --to $CLOUDCOREIPS:10003"}),"\u65f6\u62a5\u9519\u4fe1\u606f\u4e2d\u6307\u51fa\u7cfb\u7edf\u4e0d\u652f\u6301",(0,r.jsx)(n.code,{children:"--dport"}),"\u9009\u9879\uff0c\u8fd9\u662f\u56e0\u4e3aiptables\u7248\u672c\u4e0d\u652f\u6301\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528",(0,r.jsx)(n.code,{children:"iptables -V"}),"\u67e5\u770b\u7248\u672c\uff0c\u5982\u679c\u662f",(0,r.jsx)(n.code,{children:"iptables v1.8.7 (nf_tables)"}),"\uff0c\u8bf4\u660e\u9700\u8981\u66f4\u6539\u7248\u672c\uff0c\u56e0\u4e3anf_tables\u7248\u672c\u4e0d\u652f\u6301",(0,r.jsx)(n.code,{children:"--dport"}),"\u9009\u9879\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5207\u6362\u7248\u672c\uff0c\u6267\u884c\u6b64\u547d\u4ee4\u4f1a\u63d0\u4f9b3\u4e2a\u53ef\u4f9b\u9009\u62e9\u7684\u7248\u672c\uff0c\u5176\u4e2d\u7f16\u53f7\u4e3a1\u7684\u5c31\u662flegacy\u7248\u672c\uff08\u5fc5\u987b\u7528sudo\u6743\u9650\u624d\u80fd\u5207\u6362\u6210\u529f\uff09\nsudo update-alternatives --config iptables\n\n# \u9a8c\u8bc1\uff0c\u65e0\u62a5\u9519\u8f93\u51fa\u5373\u4e3a\u6210\u529f\niptables -t nat -A OUTPUT -p tcp --dport 10351 -j DNAT --to $CLOUDCOREIPS:10003\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u6267\u884c\u5b8ckeadm-join\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519token-format\u9519\u8bef",children:"\u95ee\u9898\u4e8c\u5341\uff1a\u6267\u884c\u5b8ckeadm join\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519token format\u9519\u8bef"}),"\n",(0,r.jsxs)(n.p,{children:["\u6267\u884c\u547d\u4ee4\uff1a",(0,r.jsx)(n.code,{children:"keadm join --cloudcore-ipport=114.212.81.11:10000 --kubeedge-version=1.9.2 --token=xxx"}),"\uff0c\u518d\u6267\u884c",(0,r.jsx)(n.code,{children:"journalctl -u edegecore.service -f"}),"\u547d\u4ee4\u540e\uff0c\u62a5\u9519\u4fe1\u606f\u6307\u51fatoken format\u6709\u95ee\u9898\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8981\u4e48\u662f\u56e0\u4e3acloudcore.service\u91cd\u542f\u540etoken\u53d8\u5316\u5bfc\u81f4",(0,r.jsx)(n.code,{children:"keadm join"}),"\u4e2d\u7684token\u8fc7\u65f6\uff0c\u8981\u4e48\u662f\u56e0\u4e3a\u6267\u884c",(0,r.jsx)(n.code,{children:"keadm join"}),"\u7684\u65f6\u5019token\u8f93\u5165\u7684\u4e0d\u5bf9\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u6b64\u65f6\uff0c\u9996\u5148\u5728\u4e91\u7aef\u91cd\u65b0\u83b7\u53d6\u6b63\u786e\u7684token\uff0c\u7136\u540e\u5728\u8fb9\u7aef\u4ece",(0,r.jsx)(n.code,{children:"keadm reset"}),"\u5f00\u59cb\u91cd\u65b0\u6267\u884c\u4e00\u7cfb\u5217\u64cd\u4f5c\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u4e00\u91cd\u542fedgecoreservice\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519mapping-error",children:"\u95ee\u9898\u4e8c\u5341\u4e00\uff1a\u91cd\u542fedgecore.service\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519mapping error"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u6267\u884cEdgeMesh\u542f\u52a8\u9636\u6bb5\uff0c\u4fee\u6539",(0,r.jsx)(n.code,{children:"/etc/kubeedge/config/edgecore.yaml"}),"\u6587\u4ef6\uff0c\u518d\u7528",(0,r.jsx)(n.code,{children:"systemctl restart edgecore.service"}),"\u91cd\u542f\u670d\u52a1\uff0c\u6267\u884c",(0,r.jsx)(n.code,{children:"journalctl -u edegecore.service -f"}),"\u67e5\u770blog\u53d1\u73b0\u62a5\u9519\u4fe1\u606f\u6307\u51fa\u5f53\u524d\u5b58\u5728mapping error\uff0cyaml\u65e0\u6cd5\u8f6c\u5316\u4e3ajson\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u68c0\u67e5",(0,r.jsx)(n.code,{children:"/etc/kubeedge/config/edgecore.yaml"}),"\u6587\u4ef6\u5185\u7684\u683c\u5f0f\u95ee\u9898\uff0c\u7279\u522b\u6ce8\u610fyaml\u6587\u4ef6\u4e2d\u4e0d\u80fd\u7528tab\u7f29\u8fdb\uff0c\u5fc5\u9700\u7528\u7a7a\u683c\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u4e8c\u91cd\u542fedgecoreservice\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519connect-refuse",children:"\u95ee\u9898\u4e8c\u5341\u4e8c\uff1a\u91cd\u542fedgecore.service\u540e\u518d\u6267\u884cjournalctl\u65f6\u62a5\u9519connect refuse"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u6267\u884cEdgeMesh\u542f\u52a8\u9636\u6bb5\uff0c\u4fee\u6539",(0,r.jsx)(n.code,{children:"/etc/kubeedge/config/edgecore.yaml"}),"\u6587\u4ef6\uff0c\u518d\u7528",(0,r.jsx)(n.code,{children:"systemctl restart edgecore.service"}),"\u91cd\u542f\u670d\u52a1\uff0c\u6267\u884c",(0,r.jsx)(n.code,{children:"journalctl -u edegecore.service -f"}),"\u67e5\u770blog\u53d1\u73b0\u62a5\u9519\u4fe1\u606f\u6307\u51faconnect refuse\uff0c\u4e91\u7aef\u62d2\u7edd\u901a\u4fe1\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u68c0\u67e5\u4e91\u7aefcloudcore\u72b6\u6001\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5cloudcore\u72b6\u6001\uff0c\u786e\u4fdd\u6b63\u5e38\u8fd0\u884c\nsystemctl status cloudcore\n# \u91cd\u542fcloudcore\u670d\u52a1\nsystemctl restart cloudcore.service\n# \u67e5\u770b\u62a5\u9519\u4fe1\u606f\njournalctl -u cloudcore.service -f\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6b64\u65f6\uff0c\u5f88\u6709\u53ef\u80fd\u53d1\u73b0",(0,r.jsx)(n.a,{href:"#%E9%97%AE%E9%A2%98%E5%9B%9B10002-already-in-use",children:"\u95ee\u9898\u56db"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u4e09\u90e8\u7f72metrics-service\u65f6\u9047\u5230shutting-down\u76f8\u5173\u95ee\u9898",children:"\u95ee\u9898\u4e8c\u5341\u4e09\uff1a\u90e8\u7f72metrics-service\u65f6\u9047\u5230Shutting down\u76f8\u5173\u95ee\u9898"}),"\n",(0,r.jsxs)(n.p,{children:["\u90e8\u7f72metrics-service\u8fc7\u7a0b\u4e2d\u6309\u7167\u6587\u6863\u4e2d\u4fee\u6539",(0,r.jsx)(n.code,{children:"components.yaml"}),"\u6587\u4ef6\u4e2d\u7aef\u53e3\u53f7\u4e3a4443\uff0c\u4f46\u540e\u7eedmetrics-service\u8fd0\u884c\u5931\u8d25\uff0c\n\u4ea7\u751f",(0,r.jsx)(n.code,{children:"Shutting down RequestHeaderAuthRequestController"}),"\u7b49\u76f8\u5173\u9519\u8bef\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u90e8\u7f72KubeEdge\u65f6\uff0cmetrics-service\u53c2\u6570\u4e2d\u66b4\u9732\u7684\u7aef\u53e3\u4f1a\u88ab\u81ea\u52a8\u8986\u76d6\u4e3a10250\u7aef\u53e3\uff0c",(0,r.jsx)(n.code,{children:"components.yaml"}),"\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u53c2\u6570\u5e94\u5f53\u4e0e\u540e\u7eed\u5b9e\u9645\u670d\u52a1\n\u6240\u5728\u7684\u7aef\u53e3\u4e00\u81f4\uff0c\u624b\u52a8\u4fee\u6539\u53c2\u6570\u4e2d\u7684\u7aef\u53e3\u4e3a10250\u5373\u53ef\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u56db16925496-1653-io-timeout",children:"\u95ee\u9898\u4e8c\u5341\u56db\uff1a169.254.96. 16:53: i/o timeout"}),"\n",(0,r.jsx)(n.p,{children:"\u96c6\u7fa4\u65b0\u52a0\u5165\u8282\u70b9\uff0cKubeEdge\u7684edgemesh\u4ee5\u53casedna\u7b49\u7ec4\u4ef6\u4f1a\u81ea\u52a8\u90e8\u7f72\uff0c\u4f46\u67e5\u770blc\u7684log\u53d1\u73b0\u62a5\u9519\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"client tries to connect global manager(address: gm.sedna:9000) failed, error: dial tcp: lookup gm.sedna on 169.254.96.16:53: read udp 172.17.0.3:49991->169.254.96.16:53: i/o timeout\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6392\u67e5\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u7531\u4e8e\u662fpod\u4e0eedgemesh-agent\u7684\u4ea4\u4e92\u95ee\u9898\uff0c\u9996\u5148\u68c0\u67e5\u8be5edge\u4e0a\u7684edgemesh-agent\u7684\u72b6\u6001\uff0c\u53d1\u73b0\u4f1a\u662fedgemesh-agent\u7684\u95ee\u9898:\n",(0,r.jsx)(n.img,{alt:"Q24-1",src:s(6514).A+"",width:"1009",height:"163"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u901a\u8fc7",(0,r.jsx)(n.code,{children:"kubectl describe pod <pod-name>"}),"\u53d1\u73b0\u8be5pod\u88ab\u5206\u914d\u5230\u65b0edge\u540e\u5c31\u6ca1\u6709\u5176\u4f59\u4e8b\u4ef6\u8bb0\u5f55\uff1a"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q24-2",src:s(1657).A+"",width:"1082",height:"275"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u53bbedge\u4e0a\u67e5\u770b\u4fe1\u606f\uff0c\u901a\u8fc7",(0,r.jsx)(n.code,{children:"journalctl -u edgecore.service -xe"}),"\u53ef\u4ee5\u770b\u5230\u76f8\u5173\u62a5\u9519\uff1a"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q24-3",src:s(6832).A+"",width:"1544",height:"127"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})," dockerhub\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\uff0c\u65b0\u52a0\u5165\u7684edge\u6ca1\u6709\u505a\u955c\u50cf\u6e90\u7b49\u5bf9\u5e94\u914d\u7f6e\uff0c\u5bfc\u81f4\u62c9\u53d6\u4e0d\u5230\u955c\u50cf\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})," \u914d\u7f6e\u540e\u91cd\u542fdocker\u548cedgecore\u5373\u53ef\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1",(0,r.jsx)(n.a,{href:"/docs/developer-guide/how-to-build/docker-registry/",children:"Docker\u955c\u50cf\u6e90\u914d\u7f6e"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u4e94\u8fb9\u7aefjoin\u62a5\u9519",children:"\u95ee\u9898\u4e8c\u5341\u4e94\uff1a\u8fb9\u7aefjoin\u62a5\u9519"}),"\n",(0,r.jsx)(n.p,{children:"\u8fb9\u7aef\u6267\u884ckeadm join\u62a5\u9519\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u68c0\u67e5edgecore.yaml\u6587\u4ef6\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"vim /etc/kubeedge/config/edgecore.yaml\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Q25",src:s(8469).A+"",width:"684",height:"365"})}),"\n",(0,r.jsxs)(n.p,{children:["edgeHub\u4e2d\u7684httpServer\u6dfb\u52a0\u4e91\u7aef\u5730\u5740\uff08\u4f8b\u5982",(0,r.jsx)(n.code,{children:"https://114.212.81.11:10002"}),"\uff09\uff0c\u540c\u65f6websocket\u4e2d\u7684server\u5220\u9664\u591a\u4f59\u7684",(0,r.jsx)(n.code,{children:":"}),"\uff0c\u4fee\u6539\u5b8c\u540e\u91cd\u65b0\u6267\u884c",(0,r.jsx)(n.code,{children:"keadm join"}),"\u6307\u4ee4\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u516dfailed-to-build-map-of-initial-containers-from-runtime",children:"\u95ee\u9898\u4e8c\u5341\u516d\uff1afailed to build map of initial containers from runtime"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728",(0,r.jsx)(n.code,{children:"journalctl -u edgecore.service -f"}),"\u65f6 edgecore \u62a5\u544a\u9519\u8bef\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"initialize module error: failed to build map of initial containers from runtime: no PodsandBox found with Id 'c45ed1592e75e885e119664d777107645a7e7904703c690664691c61a9f79ed3'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u627e\u5230\u5bf9\u5e94\u7684docker ID\u5e76\u5220\u9664\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker ps -a --filter "label=io.kubernetes.sandbox.id=c45ed1592e75e885e119664d777107645a7e7904703c690664691c61a9f79ed3"\n# find the related docker ID\ndocker rm <docker ID>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u4e03certificate-has-expired-or-is-not-yet-valid",children:"\u95ee\u9898\u4e8c\u5341\u4e03\uff1aCertificate has expired or is not yet valid"}),"\n",(0,r.jsxs)(n.p,{children:["\u6267\u884c ",(0,r.jsx)(n.code,{children:"kubectl get pods -A"})," \u547d\u4ee4\u65f6\u9047\u5230\u5982\u4e0b\u62a5\u9519\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Unable to connect to the server: x509: certificate has expired or is not yet valid: current time 2025-06-27T22:23:12+08:00 is after 2025-06-27T08:56:50Z\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u68c0\u67e5\u8bc1\u4e66\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo kubeadm certs check-expiration\n\n# \u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a\n[check-expiration] Reading configuration from the cluster...\n[check-expiration] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\n[check-expiration] Error reading configuration from the Cluster. Falling back to default configuration\n\nCERTIFICATE                EXPIRES                  RESIDUAL TIME   CERTIFICATE AUTHORITY   EXTERNALLY MANAGED\nadmin.conf                 Jun 27, 2025 08:56 UTC   <invalid>                               no      \napiserver                  Jun 27, 2025 08:56 UTC   <invalid>       ca                      no      \napiserver-etcd-client      Jun 27, 2025 08:56 UTC   <invalid>       etcd-ca                 no      \napiserver-kubelet-client   Jun 27, 2025 08:56 UTC   <invalid>       ca                      no      \ncontroller-manager.conf    Jun 27, 2025 08:56 UTC   <invalid>                               no      \netcd-healthcheck-client    Jun 27, 2025 08:56 UTC   <invalid>       etcd-ca                 no      \netcd-peer                  Jun 27, 2025 08:56 UTC   <invalid>       etcd-ca                 no      \netcd-server                Jun 27, 2025 08:56 UTC   <invalid>       etcd-ca                 no      \nfront-proxy-client         Jun 27, 2025 08:56 UTC   <invalid>       front-proxy-ca          no      \nscheduler.conf             Jun 27, 2025 08:56 UTC   <invalid>                               no      \n\nCERTIFICATE AUTHORITY   EXPIRES                  RESIDUAL TIME   EXTERNALLY MANAGED\nca                      Jun 25, 2034 08:56 UTC   8y              no      \netcd-ca                 Jun 25, 2034 08:56 UTC   8y              no      \nfront-proxy-ca          Jun 25, 2034 08:56 UTC   8y              no      \n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\u8bc1\u4e66\u7684\u72b6\u6001\u90fd\u662f ",(0,r.jsx)(n.code,{children:"<invalid>"})," \u8fc7\u671f\u72b6\u6001\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u66f4\u65b0 Kubernetes \u8bc1\u4e66"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo kubeadm certs renew all\n\n# \u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a\n[renew] Reading configuration from the cluster...\n[renew] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\n[renew] Error reading configuration from the Cluster. Falling back to default configuration\n\ncertificate embedded in the kubeconfig file for the admin to use and for kubeadm itself renewed\ncertificate for serving the Kubernetes API renewed\ncertificate the apiserver uses to access etcd renewed\ncertificate for the API server to connect to kubelet renewed\ncertificate embedded in the kubeconfig file for the controller manager to use renewed\ncertificate for liveness probes to healthcheck etcd renewed\ncertificate for etcd nodes to communicate with each other renewed\ncertificate for serving etcd renewed\ncertificate for the front proxy client renewed\ncertificate embedded in the kubeconfig file for the scheduler manager to use renewed\n\nDone renewing certificates. You must restart the kube-apiserver, kube-controller-manager, kube-scheduler and etcd, so that they can use the new certificates.\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u65b0\u68c0\u67e5\u8bc1\u4e66\u72b6\u6001\uff0c\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8bc1\u4e66\u90fd\u5df2\u88ab\u66f4\u65b0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo kubeadm certs check-expiration\n\n# \u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a\n[check-expiration] Reading configuration from the cluster...\n[check-expiration] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\n[check-expiration] Error reading configuration from the Cluster. Falling back to default configuration\n\nCERTIFICATE                EXPIRES                  RESIDUAL TIME   CERTIFICATE AUTHORITY   EXTERNALLY MANAGED\nadmin.conf                 Jun 27, 2026 14:30 UTC   364d                                    no      \napiserver                  Jun 27, 2026 14:30 UTC   364d            ca                      no      \napiserver-etcd-client      Jun 27, 2026 14:30 UTC   364d            etcd-ca                 no      \napiserver-kubelet-client   Jun 27, 2026 14:30 UTC   364d            ca                      no      \ncontroller-manager.conf    Jun 27, 2026 14:30 UTC   364d                                    no      \netcd-healthcheck-client    Jun 27, 2026 14:30 UTC   364d            etcd-ca                 no      \netcd-peer                  Jun 27, 2026 14:30 UTC   364d            etcd-ca                 no      \netcd-server                Jun 27, 2026 14:30 UTC   364d            etcd-ca                 no      \nfront-proxy-client         Jun 27, 2026 14:30 UTC   364d            front-proxy-ca          no      \nscheduler.conf             Jun 27, 2026 14:30 UTC   364d                                    no      \n\nCERTIFICATE AUTHORITY   EXPIRES                  RESIDUAL TIME   EXTERNALLY MANAGED\nca                      Jun 25, 2034 08:56 UTC   8y              no      \netcd-ca                 Jun 25, 2034 08:56 UTC   8y              no      \nfront-proxy-ca          Jun 25, 2034 08:56 UTC   8y              no      \n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u7136\u800c\uff0c\u518d\u6b21\u6267\u884c\u547d\u4ee4 ",(0,r.jsx)(n.code,{children:"kubectl get pods -A"})," \u4ecd\u7136\u5f97\u5230\u5982\u4e0b\u62a5\u9519\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"error: You must be logged in to the server (Unauthorized)\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u5e76\u91cd\u542f kubelet \u6765\u89e3\u51b3\u95ee\u9898\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5907\u4efd\u914d\u7f6e\u6587\u4ef6\ncp -rp $HOME/.kube/config $HOME/.kube/config.bak\n\n# \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n\n# \u91cd\u542f kubelet\nsudo systemctl restart kubelet\n# \u91cd\u542f kube-apiserver, kube-controller-manage, kube-scheduler\ndocker ps |grep kube-apiserver|grep -v pause|awk '{print $1}'|xargs -i docker restart {}\ndocker ps |grep kube-controller-manage|grep -v pause|awk '{print $1}'|xargs -i docker restart {}\ndocker ps |grep kube-scheduler|grep -v pause|awk '{print $1}'|xargs -i docker restart {}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542f Cloudcore \u5e76\u68c0\u67e5\u72b6\u6001\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u91cd\u542f Cloudcore\nsudo systemctl restart cloudcore\n# \u67e5\u770b Cloudcore \u72b6\u6001\nsystemctl status cloudcore\njournalctl -u cloudcore -xe\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c Cloudcore \u5b58\u5728\u4ee5\u4e0b\u9519\u8bef\uff1a"}),"\n",(0,r.jsxs)(c,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cloudcore.service: Main process exited, code=exited, status=2/INVALIDARGUMENT\n"})})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"-- A start job for unit cloudcore.service has finished successfully.\n-- \n-- The job identifier is 2357999.\n6\u6708 30 00:45:15 cloud.kubeedge cloudcore[3159196]: W0630 00:45:15.125171 3159196 validation.go:154] TLSTunnelPrivateKeyFile does not exist i>\n6\u6708 30 00:45:15 cloud.kubeedge cloudcore[3159196]: W0630 00:45:15.125269 3159196 validation.go:157] TLSTunnelCertFile does not exist in /etc>\n6\u6708 30 00:45:15 cloud.kubeedge cloudcore[3159196]: W0630 00:45:15.125286 3159196 validation.go:160] TLSTunnelCAFile does not exist in /etc/k>\n6\u6708 30 00:45:15 cloud.kubeedge cloudcore[3159196]: I0630 00:45:15.125336 3159196 server.go:77] Version: v1.9.2\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: panic: failed to create system namespace\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: goroutine 1 [running]:\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: github.com/kubeedge/kubeedge/cloud/cmd/cloudcore/app.NewCloudCoreCommand.func1(0xc00035f8>\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]:         /root/kubeedge/cloud/cmd/cloudcore/app/server.go:85 +0x81c\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: github.com/spf13/cobra.(*Command).execute(0xc00035f8c0, 0xc00003c1f0, 0x0, 0x0, 0xc00035f>\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]:         /root/kubeedge/vendor/github.com/spf13/cobra/command.go:854 +0x2c2\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: github.com/spf13/cobra.(*Command).ExecuteC(0xc00035f8c0, 0xc000180058, 0x1859280, 0x0)\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]:         /root/kubeedge/vendor/github.com/spf13/cobra/command.go:958 +0x375\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: github.com/spf13/cobra.(*Command).Execute(...)\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]:         /root/kubeedge/vendor/github.com/spf13/cobra/command.go:895\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]: main.main()\n6\u6708 30 00:45:16 cloud.kubeedge cloudcore[3159196]:         /root/kubeedge/cloud/cmd/cloudcore/cloudcore.go:16 +0x65\n6\u6708 30 00:45:16 cloud.kubeedge systemd[1]: cloudcore.service: Main process exited, code=exited, status=2/INVALIDARGUMENT\n-- Subject: Unit process exited\n-- Defined-By: systemd\n-- Support: http://www.ubuntu.com/support\n-- \n-- An ExecStart= process belonging to unit cloudcore.service has exited.\n-- \n-- The process' exit code is 'exited' and its exit status is 2.\n6\u6708 30 00:45:16 cloud.kubeedge systemd[1]: cloudcore.service: Failed with result 'exit-code'.\n-- Subject: Unit failed\n-- Defined-By: systemd\n-- Support: http://www.ubuntu.com/support\n-- \n-- The unit cloudcore.service has entered the 'failed' state with result 'exit-code'.\n"})})]}),"\n",(0,r.jsx)(n.p,{children:"\u5219\u9700\u8981\u66f4\u65b0 Cloudcore \u7684\u8bc1\u4e66:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4fee\u6539 '--adverse-address' \u7684IP\u5730\u5740\nkeadm init --advertise-address=114.212.81.11 --kubeedge-version=1.9.2\n\n# \u67e5\u770b Cloudcore \u72b6\u6001\njournalctl -u cloudcore -xe\n\n# \u5982\u679c Cloudcore \u7684\u65e5\u5fd7\u5b58\u5728\u7aef\u53e3\u5360\u7528\u9519\u8bef\uff0c\u5219\u5f3a\u5236\u5173\u95ed\u5360\u7528\u7aef\u53e3\u8fdb\u7a0b\nsudo lsof -i:<port>\nsudo kill -9 <pid>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8bf7\u6ce8\u610f, ",(0,r.jsx)(n.code,{children:"keadm init"}),"\u540e\u9700\u8981\u6309\u7167",(0,r.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/install-kubeedge#cloudcore-%E9%85%8D%E7%BD%AE",children:"\u3010\u5b89\u88c5 KubeEdge\u3011"}),"\u7ae0\u8282\u7684\u5185\u5bb9\u91cd\u65b0\u4fee\u6539  ",(0,r.jsx)(n.code,{children:"cloudcore.yaml"})," \u6587\u4ef6\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u95ee\u9898\u4e8c\u5341\u516b\u5927\u79b9\u7cfb\u7edf\u5bb9\u5668\u4e2d\u51fa\u73b0-connection-refused",children:"\u95ee\u9898\u4e8c\u5341\u516b\uff1a\u5927\u79b9\u7cfb\u7edf\u5bb9\u5668\u4e2d\u51fa\u73b0 Connection refused"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u5927\u79b9\u7cfb\u7edf\u5bb9\u5668\u4e2d, ",(0,r.jsx)(n.code,{children:"connection refused"})," \u9519\u8bef\u51fa\u73b0\uff0c\u7136\u800c\u5bf9\u5e94\u7684 pod \u5374\u6b63\u5e38\u4e14\u65e5\u5fd7\u65e0\u7f51\u7edc\u8fde\u63a5\u8bb0\u5f55\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u539f\u56e0\uff1a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u8fb9\u7f18\u8282\u70b9\u4e0a\u68c0\u67e5 ",(0,r.jsx)(n.code,{children:"edgemesh-agent"})," \u72b6\u6001\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n kubeedge -owide\nkubectl logs -n kubeedge edgemesh-agent-xxxxx # xxxxx \u662fpod\u540d\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4ece edgemesh-agent \u7684\u65e5\u5fd7\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\u5b58\u5728 service port \u51b2\u7a81\uff0c\u7136\u540e\u6211\u4eec\u5728\u8fb9\u7f18\u8bbe\u5907\u4e0a\u68c0\u67e5 iptables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo iptables -t nat -nvL\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5197\u4f59\u7684\u89c4\u5219\u8bb0\u5f55\u5728 iptables \u4e2d ",(0,r.jsx)(n.code,{children:"KUBE-NODEPORT-CONTAINER"}),"\u3001",(0,r.jsx)(n.code,{children:"KUBE-NODEPORT-HOST"}),"\u3001",(0,r.jsx)(n.code,{children:"KUBE-PORTALS-CONTAINER"}),"\u3001",(0,r.jsx)(n.code,{children:"KUBE-PORTALS-HOST"}),"\u9879\u4e2d (\u6765\u81ea\u4e8e\u5173\u95ed\u5927\u79b9\u7cfb\u7edf\u65f6\u7684\u6b8b\u4f59\u8bb0\u5f55)\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e34\u65f6\u89e3\u51b3\u65b9\u6848\u662f\u6e05\u7a7a\u8fb9\u7f18\u8282\u70b9\u4e0a edgecore \u7684\u6570\u636e\u5e93\uff08\u8fd9\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff09\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u505c\u6b62 edgecore\nsudo systemctl stop edgecore\n# \u5907\u4efd kuebedge \u6570\u636e\nsudo tar -czf /tmp/kubeedge-backup-$(date +%F-%H%M%S).tgz /var/lib/kubeedge\n# \u6e05\u7a7a kubeedge \u6570\u636e\u5e93\nsudo rm -rf /var/lib/kubeedge\nsudo mkdir -p /var/lib/kubeedge\nsudo chown -R root:root /var/lib/kubeedge\n# \u542f\u52a8 edgecore\nsudo systemctl start edgecore\n# \u68c0\u67e5 edgecore \u72b6\u6001\nsudo journalctl -u edgecore -f --no-pager\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53e6\u4e00\u79cd\u4e34\u65f6\u89e3\u51b3\u65b9\u6848\u662f\u53c2\u7167",(0,r.jsx)(n.a,{href:"/docs/getting-started/install-lower-layer-system/install-kubeedge#%E5%8A%A0%E5%85%A5kubeedge%E9%9B%86%E7%BE%A4%E8%BE%B9%E7%AB%AF",children:"\u6587\u6863"}),"\u5728\u8fb9\u7f18\u8282\u70b9\u4e0a\u91cd\u65b0\u5b89\u88c5 KubeEdge \u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8be5\u95ee\u9898\u5df2\u5728\u5927\u79b9",(0,r.jsx)(n.code,{children:"v1.3"}),"\u7248\u672c\u88ab\u6c38\u4e45\u89e3\u51b3\uff0c\u4f7f\u7528\u6700\u65b0\u7684\u5927",(0,r.jsx)(n.a,{href:"https://github.com/dayu-autostreamer/dayu/blob/main/dayu.sh",children:"\u79b9\u542f\u52a8\u811a\u672c"}),"\u53ef\u4ee5\u907f\u514d\u6b64\u95ee\u9898\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},3257:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q12-1-60f1a6a94ca2026686a35355f721293d.png"},4594:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q17-669c6d2f79f3164af4465da5421337b5.png"},5481:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q9-3-591f4e53eb2b30e79c052d9cc8a342d2.png"},5584:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q9-2-7da49098d112b131753b39531fdc55aa.png"},6514:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q24-1-b02734af65fce88ec4459259d817bc36.png"},6832:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q24-3-af894ddc03e47d6514186c0bb7f079ba.png"},6875:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q9-1-7d0151af41d7e0fcc09e05810fef0580.png"},8114:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q12-2-f993592abf40687d45bb005fd2b6ed1c.png"},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>t});var c=s(6540);const r={},d=c.createContext(r);function i(e){const n=c.useContext(d);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),c.createElement(d.Provider,{value:n},e.children)}},8469:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q25-dc68c2dfac16a206d5fd83e3a9d1ba11.png"},9058:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q7-2-3eda05d263f0bcb0b0c4f215dea5feca.png"},9737:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q14-6d45356896d3c46128f949c4ca662ba4.png"},9791:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Q7-8146db94e6f201c47562da7a76cc6ab9.png"}}]);