<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-getting-started/install-lower-layer-system/faqs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">FAQs | Dayu</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://dayu-autostreamer.github.io/img/dayu-logo-horizontal.svg"><meta data-rh="true" name="twitter:image" content="https://dayu-autostreamer.github.io/img/dayu-logo-horizontal.svg"><meta data-rh="true" property="og:url" content="https://dayu-autostreamer.github.io/docs/getting-started/install-lower-layer-system/faqs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="FAQs | Dayu"><meta data-rh="true" name="description" content="If you encounter errors in dayu system, please follow these steps to troubleshoot and use FAQs to solve:"><meta data-rh="true" property="og:description" content="If you encounter errors in dayu system, please follow these steps to troubleshoot and use FAQs to solve:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://dayu-autostreamer.github.io/docs/getting-started/install-lower-layer-system/faqs"><link data-rh="true" rel="alternate" href="https://dayu-autostreamer.github.io/docs/getting-started/install-lower-layer-system/faqs" hreflang="en"><link data-rh="true" rel="alternate" href="https://dayu-autostreamer.github.io/zh/docs/getting-started/install-lower-layer-system/faqs" hreflang="zh"><link data-rh="true" rel="alternate" href="https://dayu-autostreamer.github.io/docs/getting-started/install-lower-layer-system/faqs" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Dayu RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Dayu Atom Feed"><link rel="stylesheet" href="/assets/css/styles.0b5e038f.css">
<script src="/assets/js/runtime~main.600ea0fe.js" defer="defer"></script>
<script src="/assets/js/main.b6004f05.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/dayu-logo-text.svg"><link rel="preload" as="image" href="/img/dayu-logo-text-white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/dayu-logo-text.svg" alt="Dayu Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dayu-logo-text-white.svg" alt="Dayu Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction/why-dayu">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started/install-lower-layer-system/faqs">Next</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/getting-started/install-lower-layer-system/faqs" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/getting-started/install-lower-layer-system/faqs" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/dayu-autostreamer/dayu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/introduction/why-dayu">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/why-dayu">Why Dayu</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/key-features">Key Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/demos">Demos</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/architecture">Architecture</a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/preparation">Preparation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/getting-started/install-lower-layer-system">Install Lower Layer System</a><button aria-label="Collapse sidebar category &#x27;Install Lower Layer System&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/pre-requisites">Pre-requisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/install-kubernetes">Install Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/install-kubeedge">Install KubeEdge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/install-edgemesh">Install EdgeMesh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/install-sedna">Install Sedna</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/install-nvidia-gpu-support">Install NVIDIA GPU Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/install-lower-layer-system/common-commands">Common Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/install-lower-layer-system/faqs">FAQs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/getting-started/start-upper-layer-system">Start Upper Layer System</a><button aria-label="Expand sidebar category &#x27;Start Upper Layer System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/developer-guide">Developer Guide</a><button aria-label="Expand sidebar category &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/case-study/configuration-optimization">Case Study</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/community/contributing">Community</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/getting-started/install-lower-layer-system"><span itemprop="name">Install Lower Layer System</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">FAQs</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>FAQs</h1></header>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Debug Tips in Dayu System</div><div class="admonitionContent_BuS1"><p><strong>If you encounter errors in dayu system, please follow these steps to troubleshoot and use FAQs to solve:</strong></p><p>✅ <strong>Check Dayu Pods:</strong> Use <code>kubectl get pods -n &lt;your-dayu-namespace&gt;</code> to check dayu pods status.
Use <code>kubectl logs &lt;pod-name&gt; -n &lt;your-dayu-namespace&gt;</code> and <code>kubectl describes pod &lt;pod-name&gt; -n &lt;your-dayu-namespace&gt;</code> to check log information in abnormal pods.</p><p>✅ <strong>Check Dayu Core Resources:</strong> Use <code>kubectl get svc -n &lt;your-dayu-namespace&gt;</code> and <code>kubectl get deployment -n &lt;your-dayu-namespace&gt;</code> to check services and deployments if pods are in unknown status.</p><p>✅ <strong>Check Node Connections:</strong> Use <code>kubectl get nodes</code> to check node status in the distributed cloud-edge system (&#x27;Ready&#x27; or &#x27;Not Ready&#x27;).</p><p>✅ <strong>Check Sedna:</strong> Check Sedna gm and lc logs with <code>kubectl get pods -n sedna -owide</code> and <code>kubectl logs &lt;sedna-pod-name&gt; -n sedna</code>.</p><p>✅ <strong>Check EdgeMesh:</strong> Check EdgeMesh agent logs with <code>kubectl get pods -n kubeedge -owide</code> and <code>kubectl logs &lt;edgemesh-pod-name&gt; -n kubeedge</code> if communication between nodes is blocked.</p><p>✅ <strong>Check Cloudcore:</strong> Use <code>systemctl status cloudcore</code> or <code>journalctl -u cloudcore -xe</code> on the cloud server to check cloudcore is running without errors.</p><p>✅ <strong>Check Edgecore:</strong> Use <code>systemctl status edgecore</code> or <code>journalctl -u edgecore -xe</code> on the edge device to check edgecore is running without errors.</p><p>✅ <strong>Check Kubelet</strong> Use <code>systemctl status kubelet</code> or <code>journalctl -u kubelet -xe</code> on the cloud server to check k8s administrator service is running without errors.</p><p>✅ <strong>Check Docker:</strong> If none of the <code>kubectl</code> commands or other k8s commands works, check docker container status with <code>docker ps -a</code> and check docker logs with <code>systemctl status docker</code> or <code>journalctl -u docker -xe</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-1-kube-proxy-report-iptables-problems">Question 1: kube-proxy report iptables problems<a href="#question-1-kube-proxy-report-iptables-problems" class="hash-link" aria-label="Direct link to Question 1: kube-proxy report iptables problems" title="Direct link to Question 1: kube-proxy report iptables problems">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">E0627 09:28:54.054930 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> proxier.go:1598</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Failed to execute iptables-restore: </span><span class="token builtin class-name">exit</span><span class="token plain"> status </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">iptables-restore: line </span><span class="token number" style="color:#36acaa">86</span><span class="token plain"> failed </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> I0627 09:28:54.054962 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> proxier.go:879</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Sync failed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> retrying </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 30s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Solution:</strong> Clear iptables directly.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">iptables </span><span class="token parameter variable" style="color:#36acaa">-F</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> nat </span><span class="token parameter variable" style="color:#36acaa">-F</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> mangle </span><span class="token parameter variable" style="color:#36acaa">-F</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-X</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-2-calico-and-coredns-are-always-in-initializing-state">Question 2: calico and coredns are always in initializing state<a href="#question-2-calico-and-coredns-are-always-in-initializing-state" class="hash-link" aria-label="Direct link to Question 2: calico and coredns are always in initializing state" title="Direct link to Question 2: calico and coredns are always in initializing state">​</a></h2>
<p>The follwoing message will occur when using <code>kubectl describe &lt;podname&gt;</code>  which is roughly related to network and sandbox issues.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Failed to create pod sandbox: rpc error: code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Unknown desc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">failed to </span><span class="token builtin class-name">set</span><span class="token plain"> up sandbox container </span><span class="token string" style="color:#e3116c">&quot;7f5b66ebecdfc2c206027a2afcb9d1a58ec5db1a6a10a91d4d60c0079236e401&quot;</span><span class="token plain"> network </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> pod </span><span class="token string" style="color:#e3116c">&quot;calico-kube-controllers-577f77cb5c-99t8z&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> networkPlugin cni failed to </span><span class="token builtin class-name">set</span><span class="token plain"> up pod </span><span class="token string" style="color:#e3116c">&quot;calico-kube-controllers-577f77cb5c-99t8z_kube-system&quot;</span><span class="token plain"> network: error getting ClusterInformation: Get </span><span class="token string" style="color:#e3116c">&quot;https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clusterinformations/default&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> dial tcp </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.0. </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:443: i/o timeout, failed to clean up sandbox container </span><span class="token string" style="color:#e3116c">&quot;7f5b66ebecdfc2c206027a2afcb9d1a58ec5db1a6a10a91d4d60c0079236e401&quot;</span><span class="token plain"> network </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> pod </span><span class="token string" style="color:#e3116c">&quot;calico-kube-controllers-577f77cb5c-99t8z&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> networkPlugin cni failed to teardown pod </span><span class="token string" style="color:#e3116c">&quot;calico-kube-controllers-577f77cb5c-99t8z_kube-system&quot;</span><span class="token plain"> network: error getting ClusterInformation: Get </span><span class="token string" style="color:#e3116c">&quot;https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clusterinformations/default&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> dial tcp </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.0. </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:443: i/o timeout</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Reason:</strong> Such a problem occurs when a k8s cluster is initialized more than once
and the network configuration of k8s was not deleted previously.</p>
<p><strong>Solution:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># delete k8s network configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> /etc/cni/net.d/  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># reinitialize k8s with the instruction</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-3-metrics-server-keeps-unsuccessful-state">Question 3: metrics-server keeps unsuccessful state<a href="#question-3-metrics-server-keeps-unsuccessful-state" class="hash-link" aria-label="Direct link to Question 3: metrics-server keeps unsuccessful state" title="Direct link to Question 3: metrics-server keeps unsuccessful state">​</a></h2>
<p><strong>Reason:</strong> Master node does not add taint.</p>
<p><strong>Solution:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># add taint on master node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl taint nodes </span><span class="token parameter variable" style="color:#36acaa">--all</span><span class="token plain"> node-role.kubernetes.io/master node-role.kubernetes.io/master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-4-10002-already-in-use">Question 4: 10002 already in use<a href="#question-4-10002-already-in-use" class="hash-link" aria-label="Direct link to Question 4: 10002 already in use" title="Direct link to Question 4: 10002 already in use">​</a></h2>
<p>Error message &#x27;xxx already in use&#x27; occurs when using <code>journalctl -u cloudcore.service -xe</code>.</p>
<p><strong>Reason:</strong> The previous processes were not cleaned up.</p>
<p><strong>Solution:</strong> Find the process occupying the port and directly kill it.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">lsof</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i:xxxx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> xxxxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-5-edgecore-file-exists">Question 5: edgecore file exists<a href="#question-5-edgecore-file-exists" class="hash-link" aria-label="Direct link to Question 5: edgecore file exists" title="Direct link to Question 5: edgecore file exists">​</a></h2>
<p>When attempting to create a symbolic link in installing edgecore, the target path already exists and cannot be created.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">execute keadm </span><span class="token builtin class-name">command</span><span class="token plain"> failed:  failed to </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bash -c sudo ln /etc/kubeedge/edgecore.service /etc/systemd/system/edgecore.service &amp;&amp; sudo systemctl daemon-reload &amp;&amp; sudo systemctl enable edgecore &amp;&amp; sudo systemctl start edgecore&#x27;</span><span class="token plain">, err: ln: failed to create hard </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/etc/systemd/system/edgecore.service&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"> File exists, err: </span><span class="token builtin class-name">exit</span><span class="token plain"> status </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Reason:</strong> <code>edgecore.service</code> already exists in the <code>/etc/systemd/system/</code> directory
if edgecore is installed more than once.</p>
<p><strong>Solution:</strong> Just delete it.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> /etc/systemd/system/edgecore.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-6-tlsstreamprivatekeyfile-not-exist">Question 6: TLSStreamPrivateKeyFile not exist<a href="#question-6-tlsstreamprivatekeyfile-not-exist" class="hash-link" aria-label="Direct link to Question 6: TLSStreamPrivateKeyFile not exist" title="Direct link to Question 6: TLSStreamPrivateKeyFile not exist">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> TLSStreamPrivateKeyFile: Invalid value: </span><span class="token string" style="color:#e3116c">&quot;/etc/kubeedge/certs/stream.key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> TLSStreamPrivateKeyFile not exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">12</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">14</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain">:02:23 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">196229</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:   TLSStreamCertFile: Invalid value: </span><span class="token string" style="color:#e3116c">&quot;/etc/kubeedge/certs/stream.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> TLSStreamCertFile not exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">12</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">14</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain">:02:23 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">196229</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:   TLSStreamCAFile: Invalid value: </span><span class="token string" style="color:#e3116c">&quot;/etc/kubeedge/ca/streamCA.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> TLSStreamCAFile not exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">12</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">14</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain">:02:23 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">196229</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Solution:</strong> Check whether directory <code>/etc/kubeedge</code> has file <code>certgen.sh</code> and run <code>bash certgen.sh stream</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-7-edgemesh-has-successful-edge-edge-but-failed-cloud-edge-connection">Question 7: EdgeMesh has successful edge-edge but failed cloud-edge connection<a href="#question-7-edgemesh-has-successful-edge-edge-but-failed-cloud-edge-connection" class="hash-link" aria-label="Direct link to Question 7: EdgeMesh has successful edge-edge but failed cloud-edge connection" title="Direct link to Question 7: EdgeMesh has successful edge-edge but failed cloud-edge connection">​</a></h2>
<p><strong>Troubleshooting:</strong></p>
<p>First, based on the <strong>location model</strong>, ensure whether the edgemesh-agent container exists on the <strong>visited node</strong> and whether it is operating normally.</p>
<p><img decoding="async" loading="lazy" alt="Q7-2" src="/assets/images/Q7-2-3eda05d263f0bcb0b0c4f215dea5feca.png" width="1440" height="520" class="img_ev3q"></p>
<p>This situation is common since the master node usually has taints, which will evict other pods, thereby causing the deployment failure of edgemesh-agent.
This issue can be resolved by <strong>removing the node taints</strong>.</p>
<p>If both the visiting node and the visited node&#x27;s edgemesh-agent have been started normally while this error is still reported,
it may be due to unsucessful discovering between the visiting node and the visited node. Please troubleshoot in this way:</p>
<ol>
<li>edgemesh-agent at each node has a peer ID (generated with the hash of node name):</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">edge1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I&#x27;m {12D3KooWFz1dKY8L3JC8wAY6sJ5MswvPEGKysPCfcaGxFmeH7wkz: [/ip4/127.0.0.1/tcp/20006 /ip4/192.168.1.2/tcp/20006]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edge2: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I&#x27;m {12D3KooWPpY4GqqNF3sLC397fMz5ZZfxmtMTNa1gLYFopWbHxZDt: [/ip4/127.0.0.1/tcp/20006 /ip4/192.168.1.4/tcp/20006]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>
<p>If visiting node and visited node are in the same LAN with internet IP, refer to Question 12 in <a href="https://zhuanlan.zhihu.com/p/585749690" target="_blank" rel="noopener noreferrer">EdgeMesh Q&amp;A</a>. Logs of discovering node in the same LAN is  <code>[MDNS] Discovery found peer: &lt;visited node peer ID: [visited IP list(include relay node IP)]&gt;</code>.</p>
</li>
<li>
<p>If visiting node and visited node are across different LANs, check setting of relayNodes (Details at <a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/4whnkMM9oOaWRsI1ICsvSA" target="_blank" rel="noopener noreferrer">KubeEdge EdgeMesh Architecture</a>). Logs of discovering node across LANs is <code>[DHT] Discovery found peer: &lt;visited node peer ID: [visited IP list(include relay node IP)]&gt;</code>.</p>
</li>
</ol>
<p><strong>Solution:</strong></p>
<p>Before deploy EdgeMesh with <code>kubectl apply -f build/agent/resources/</code>, modify file <code>04-configmap.yaml</code> and add relayNode.</p>
<p><img decoding="async" loading="lazy" alt="Q7" src="/assets/images/Q7-8146db94e6f201c47562da7a76cc6ab9.png" width="888" height="1081" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-8-gpu-is-not-found-on-master">Question 8: GPU is not found on master<a href="#question-8-gpu-is-not-found-on-master" class="hash-link" aria-label="Direct link to Question 8: GPU is not found on master" title="Direct link to Question 8: GPU is not found on master">​</a></h2>
<p>Use <code>nvidia-smi</code> to see GPU status on the cloud server. To support GPU in k8s pod on cloud server, extra plugin is needed.</p>
<blockquote>
<p>Please refer to the following link:
<a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#configuration" target="_blank" rel="noopener noreferrer">Installing the NVIDIA Container Toolkit — NVIDIA Container Toolkit 1.14.3 documentation</a></p>
</blockquote>
<p>Configure as the link, and add <code>default-runtime</code> in &#x27;/etc/docker/daemon.json&#x27; (remember to restart docker after modification):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;default-runtime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nvidia&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;runtimes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;nvidia&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;args&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nvidia-container-runtime&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-9-cannot-find-gpu-resources-in-jetson">Question 9: cannot find GPU resources in jetson<a href="#question-9-cannot-find-gpu-resources-in-jetson" class="hash-link" aria-label="Direct link to Question 9: cannot find GPU resources in jetson" title="Direct link to Question 9: cannot find GPU resources in jetson">​</a></h2>
<p><code>k8s-device-plugin</code> has been installed successfully, but nvidia pod on jetson nodes (with tegra architecture) reveals that gpu is not found:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 Retreiving plugins.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 Detected non-NVML platform: could not load NVML: libnvidia-ml.so.1: cannot </span><span class="token function" style="color:#d73a49">open</span><span class="token plain"> shared object file: No such </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> or directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 Detected non-Tegra platform: /sys/devices/soc0/family </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> not found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 Incompatible platform detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 If this is a GPU node, did you configure the NVIDIA Container Toolkit?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 You can check the prerequisites at: https://github.com/NVIDIA/k8s-device-plugin</span><span class="token comment" style="color:#999988;font-style:italic">#prerequisites</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 You can learn how to </span><span class="token builtin class-name">set</span><span class="token plain"> the runtime at: https://github.com/NVIDIA/k8s-device-plugin</span><span class="token comment" style="color:#999988;font-style:italic">#quick-start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 If this is not a GPU node, you should </span><span class="token builtin class-name">set</span><span class="token plain"> up a toleration or nodeSelector to only deploy this plugin on GPU nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">/01/04 07:43:58 No devices found. Waiting indefinitely.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Q9-1" src="/assets/images/Q9-1-7d0151af41d7e0fcc09e05810fef0580.png" width="1624" height="203" class="img_ev3q"></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dpkg </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*nvidia*&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Q9-2" src="/assets/images/Q9-2-7da49098d112b131753b39531fdc55aa.png" width="1623" height="795" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Q9-3" src="/assets/images/Q9-3-591f4e53eb2b30e79c052d9cc8a342d2.png" width="1447" height="386" class="img_ev3q"></p>
<blockquote>
<p><a href="https://github.com/NVIDIA/k8s-device-plugin/issues/377" target="_blank" rel="noopener noreferrer">Plug in does not detect Tegra device Jetson Nano · Issue #377 · NVIDIA/k8s-device-plugin (github.com)</a>Note that looking at the initial logs that you provided you may have been using <code>v1.7.0</code> of the NVIDIA Container Toolkit. This is quite an old version and we greatly improved our support for Tegra-based systems with the <code>v1.10.0</code> release. It should also be noted that in order to use the GPU Device Plugin on Tegra-based systems (specifically targetting the integrated GPUs) at least <code>v1.11.0</code> of the NVIDIA Container Toolkit is required.There are no Tegra-specific changes in the <code>v1.12.0</code> release, so using the <code>v1.11.0</code> release should be sufficient in this case.</p>
</blockquote>
<p><strong>Solution:</strong> Upgrade the <strong>NVIDIA Container Toolkit</strong> on jetson nodes.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-fsSL</span><span class="token plain"> https://nvidia.github.io/libnvidia-container/gpgkey </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> gpg </span><span class="token parameter variable" style="color:#36acaa">--dearmor</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain"> https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;s#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> /etc/apt/sources.list.d/nvidia-container-toolkit.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> nvidia-container-toolkit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-10-lc12700-5353-no-such-hostconnection-refused">Question 10: lc127.0.0. 53:53 no such host/connection refused<a href="#question-10-lc12700-5353-no-such-hostconnection-refused" class="hash-link" aria-label="Direct link to Question 10: lc127.0.0. 53:53 no such host/connection refused" title="Direct link to Question 10: lc127.0.0. 53:53 no such host/connection refused">​</a></h2>
<p>During the Sedna installation stage, an error occurs in logs: <code>lc127.0.0. 53:53 no such host/connection refused</code>.</p>
<p><strong>Reason:</strong> See question 5 in <a href="https://zhuanlan.zhihu.com/p/585749690" target="_blank" rel="noopener noreferrer">EdgeMesh Q&amp;A</a>.</p>
<p><strong>Solution:</strong></p>
<p>First check whether <code>Hostnetwork</code> is in the script <code>install.sh</code>. Delete <code>Hostnetwork</code> options if it exists (<code>install.sh</code> in <a href="https://github.com/dayu-autostreamer/dayu-sedna" target="_blank" rel="noopener noreferrer">dayu-cusomized sedna</a> is correct).</p>
<p>If <code>Hostnetwork</code> does not exist but the error is still reported, use the following method to temporarily solve (<strong>not recommend</strong>):</p>
<ol>
<li>Add <code>nameserver 169.254.96.16</code> to the last line of file <code>/etc/resolv.conf</code> on edge nodes with sedna pod error.</li>
<li>Check whether clusterDNS is <code>169.254.96.16</code> in <code>/etc/kubeedge/config/edgecore.yaml</code> on edge nodes.</li>
<li>If error still exists, reinstall Sedna.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-11-1692549616-such-host">Question 11: 169.254.96.16<!-- -->:no<!-- --> such host<a href="#question-11-1692549616-such-host" class="hash-link" aria-label="Direct link to question-11-1692549616-such-host" title="Direct link to question-11-1692549616-such-host">​</a></h2>
<p>Check the configuration of EdgeMesh:</p>
<ol>
<li>Check the chain in iptables as <a href="https://edgemesh.netlify.app/zh/advanced/hybird-proxy.html" target="_blank" rel="noopener noreferrer">Hybrid proxy | EdgeMesh</a>.</li>
<li>Check <code>clusterDNS</code> as required in <a href="/docs/getting-started/install-lower-layer-system/install-edgemesh#configure-edge-network-edge">EdgeMesh Installation</a>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-12-kubectl-logs-pod-name-timeout">Question 12: <code>kubectl logs &lt;pod-name&gt;</code> timeout<a href="#question-12-kubectl-logs-pod-name-timeout" class="hash-link" aria-label="Direct link to question-12-kubectl-logs-pod-name-timeout" title="Direct link to question-12-kubectl-logs-pod-name-timeout">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Q12-1" src="/assets/images/Q12-1-60f1a6a94ca2026686a35355f721293d.png" width="1618" height="42" class="img_ev3q"></p>
<p><strong>Reason:</strong> Refer to <a href="https://zhuanlan.zhihu.com/p/379962934" target="_blank" rel="noopener noreferrer">Kubernetes nodes cannot capture monitoring metrics(zhihu.com)</a></p>
<p><img decoding="async" loading="lazy" alt="Q12-2" src="/assets/images/Q12-2-f993592abf40687d45bb005fd2b6ed1c.png" width="896" height="428" class="img_ev3q"></p>
<p>It can be found that the error happened in port <code>10350</code>, which is responsible for forwarding in kubeedge.
Therefore, it should be a configuration issue with <code>cloudcore</code>.</p>
<p><strong>Solution:</strong> Please set as <a href="https://kubeedge.io/docs/advanced/debug/" target="_blank" rel="noopener noreferrer">Enable Kubectl logs/exec to debug pods on the edge | KubeEdge</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-13-stuck-in-kubectl-logs-pod-name">Question 13: Stuck in <code>kubectl logs &lt;pod-name&gt;</code><a href="#question-13-stuck-in-kubectl-logs-pod-name" class="hash-link" aria-label="Direct link to question-13-stuck-in-kubectl-logs-pod-name" title="Direct link to question-13-stuck-in-kubectl-logs-pod-name">​</a></h2>
<p><strong>Reason:</strong> It maybe caused by the force termination of <code>kubectl logs</code> command.</p>
<p><strong>Solution:</strong> Restart edgecore/cloudcore:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># on cloud</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart cloudcore.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># on edge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart edgecore.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-14-cloudcore-reports-certficate-error">Question 14: CloudCore reports certficate error<a href="#question-14-cloudcore-reports-certficate-error" class="hash-link" aria-label="Direct link to Question 14: CloudCore reports certficate error" title="Direct link to Question 14: CloudCore reports certficate error">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Q14" src="/assets/images/Q14-6d45356896d3c46128f949c4ca662ba4.png" width="1628" height="310" class="img_ev3q"></p>
<p><strong>Reason:</strong> Token of master has changed.</p>
<p><strong>Solution:</strong> Use new token from cloud to join.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-15-deleting-namespace-stucks-in-terminating-state">Question 15: deleting namespace stucks in terminating state<a href="#question-15-deleting-namespace-stucks-in-terminating-state" class="hash-link" aria-label="Direct link to Question 15: deleting namespace stucks in terminating state" title="Direct link to Question 15: deleting namespace stucks in terminating state">​</a></h2>
<p><strong>Method 1</strong> (Probably won&#x27;t work)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete ns sedna </span><span class="token parameter variable" style="color:#36acaa">--force</span><span class="token plain"> --grace-period</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Method 2</strong>：</p>
<p>Open a proxy terminal:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting to serve on </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:8001</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Open an operating terminal:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># save configuration file of namespace (use sedna as example here)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get ns sedna </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> json </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sedna.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Delete the contents of spec and status sections and the &quot;,&quot; sign after the metadata field.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The remaining content in <code>sedna.json</code> is shown as follows:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;apiVersion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Namespace&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;metadata&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;creationTimestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:12:13Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;deletionTimestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:25Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;managedFields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;apiVersion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fieldsType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;FieldsV1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fieldsV1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:phase&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;manager&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kubectl-create&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;operation&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Update&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:12:13Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;apiVersion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fieldsType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;FieldsV1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fieldsV1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:conditions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;.&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;k:{\&quot;type\&quot;:\&quot;NamespaceContentRemaining\&quot;}&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;.&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:lastTransitionTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:reason&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;k:{\&quot;type\&quot;:\&quot;NamespaceDeletionContentFailure\&quot;}&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;.&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:lastTransitionTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:reason&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;k:{\&quot;type\&quot;:\&quot;NamespaceDeletionDiscoveryFailure\&quot;}&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;.&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:lastTransitionTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:reason&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;k:{\&quot;type\&quot;:\&quot;NamespaceDeletionGroupVersionParsingFailure\&quot;}&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;.&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:lastTransitionTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:reason&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;k:{\&quot;type\&quot;:\&quot;NamespaceFinalizersRemaining\&quot;}&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;.&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:lastTransitionTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:reason&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;f:type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;manager&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kube-controller-manager&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;operation&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Update&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:30Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sedna&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;resourceVersion&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3351515&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;uid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;99cb8afb-a4c1-45e6-960d-ff1b4894773d&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>Delete namespace by call the interface:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-k</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> PUT --data-binary @sedna.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://127.0.0.1:8001/api/v1/namespaces/sedna/finalize</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Namespace&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;metadata&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sedna&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;uid&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;99cb8afb-a4c1-45e6-960d-ff1b4894773d&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;resourceVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3351515&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;creationTimestamp&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:12:13Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;deletionTimestamp&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:25Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;managedFields&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curl&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;operation&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Update&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:42:38Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fieldsType&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;FieldsV1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fieldsV1&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;f:status&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;f:phase&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;spec&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;phase&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Terminating&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NamespaceDeletionDiscoveryFailure&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;lastTransitionTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:30Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DiscoveryFailed&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Discovery failed for some groups, 1 failing: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NamespaceDeletionGroupVersionParsingFailure&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;lastTransitionTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:30Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ParsedGroupVersions&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;All legacy kube types successfully parsed&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NamespaceDeletionContentFailure&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;lastTransitionTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:30Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ContentDeleted&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;All content successfully deleted, may be waiting on finalization&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NamespaceContentRemaining&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;lastTransitionTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:30Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ContentRemoved&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;All content successfully removed&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NamespaceFinalizersRemaining&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;lastTransitionTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-12-14T09:15:30Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ContentHasNoFinalizers&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;All content-preserving finalizers finished&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-16-deployment-failed-after-forcibly-deleting-pod">Question 16: Deployment failed after forcibly deleting pod<a href="#question-16-deployment-failed-after-forcibly-deleting-pod" class="hash-link" aria-label="Direct link to Question 16: Deployment failed after forcibly deleting pod" title="Direct link to Question 16: Deployment failed after forcibly deleting pod">​</a></h2>
<p>Deployment creates pods. But after deleting deployment through <code>kubectl delete deploy &lt;deploy-name&gt;</code>, pods are stuck in &#x27;terminating&#x27; status.</p>
<p>Then, use <code>kubectl delete pod edgeworker-deployment-7g5hs-58dffc5cd7-b77wz --force --grace-period=0</code> to delete pods. And the re-deployed pods are stuck in &#x27;pending&#x27; state after assigning to node.</p>
<p><strong>Solution:</strong></p>
<p>Deleting pods with option <code>--force</code> does not actually terminate pods.</p>
<p>You should go to the specific node and manually delete the corresponding docker containers (including pause, see details at <a href="https://zhuanlan.zhihu.com/p/464712164" target="_blank" rel="noopener noreferrer">Pause in K8S Pod</a>)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Check pod position on cloud</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-owide</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Delete docker containers on specific node (the position of pod)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> stop </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">container</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">container</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Restart edgecore on specific node (the pod)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart edgecore.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-17-after-deleting-deployments-and-pods-the-pods-still-restart-automatically">Question 17: After deleting deployments and pods, the pods still restart automatically<a href="#question-17-after-deleting-deployments-and-pods-the-pods-still-restart-automatically" class="hash-link" aria-label="Direct link to Question 17: After deleting deployments and pods, the pods still restart automatically" title="Direct link to Question 17: After deleting deployments and pods, the pods still restart automatically">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> journalctl -u edgecore.service  -f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Q17" src="/assets/images/Q17-669c6d2f79f3164af4465da5421337b5.png" width="1557" height="148" class="img_ev3q"></p>
<p><strong>Solution:</strong> Restart <code>edgecore</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart edgecore.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-18-large-scale-evicted-disk-pressure">Question 18: Large-scale Evicted (disk pressure)<a href="#question-18-large-scale-evicted-disk-pressure" class="hash-link" aria-label="Direct link to Question 18: Large-scale Evicted (disk pressure)" title="Direct link to Question 18: Large-scale Evicted (disk pressure)">​</a></h2>
<p><strong>Reason:</strong></p>
<p>The free disk space (usually root directory) is below the threshold (15%), and kubelet will kill pods to recycle resources (Details at <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fkubernetes.io%2Fdocs%2Ftasks%2Fadminister-cluster%2Fout-of-resource%2F" target="_blank" rel="noopener noreferrer">K8S Insufficient Resource</a>).</p>
<p><strong>Solution:</strong></p>
<p>The fundamental solution is to increase the available disk space.</p>
<p>If a temporary solution is needed, the threshold can be changed by modifying the k8s configuration.</p>
<p>Specifically, modify the configuration file and add <code>--eviction-hard=nodefs.available&lt;5%</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status kubelet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">● kubelet.service - kubelet: The Kubernetes Node Agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Loaded: loaded </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">/lib/systemd/system/kubelet.service</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> enabled</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> vendor preset: enabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Drop-In: /etc/systemd/system/kubelet.service.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             └─10-kubeadm.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Active: active </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">running</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> since Fri </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-12-15 09:17:50 CST</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> 5min ago</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Docs: https://kubernetes.io/docs/home/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Main PID: </span><span class="token number" style="color:#36acaa">1070209</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tasks: </span><span class="token number" style="color:#36acaa">59</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">limit: </span><span class="token number" style="color:#36acaa">309024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Memory: </span><span class="token number" style="color:#36acaa">67</span><span class="token plain">.2M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     CGroup: /system.slice/kubelet.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>From the outputs you can see that configuration file is at directory <code>/etc/systemd/system/kubelet.service.d</code>
and configuration file is <code>10-kubeadm.conf</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> /etc/systemd/system/kubelet.service.d/10-kubeadm.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">Environment</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">Environment</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;KUBELET_CONFIG_ARGS=--config=/var/lib/kubelet/config.yaml --eviction-hard=nodefs.available&lt;5%&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># add &#x27;--eviction-hard=nodefs.available&lt;5%&#x27; at the end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Restart <code>kubelet</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl  restart kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You will find that it can be deployed normally (it&#x27;s just a temporary method, the disk space needs to be cleaned up).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-19-executing-iptables-report-that-system-does-not-support---dport">Question 19: Executing &#x27;iptables&#x27; report that system does not support &#x27;--dport&#x27;<a href="#question-19-executing-iptables-report-that-system-does-not-support---dport" class="hash-link" aria-label="Direct link to Question 19: Executing &#x27;iptables&#x27; report that system does not support &#x27;--dport&#x27;" title="Direct link to Question 19: Executing &#x27;iptables&#x27; report that system does not support &#x27;--dport&#x27;">​</a></h2>
<p>When executing command <code>iptables -t nat -A OUTPUT -p tcp --dport 10351 -j DNAT --to $CLOUDCOREIPS:10003</code>, an error of not supporting <code>--dport</code> is reported.</p>
<p><strong>Reason:</strong> The <code>iptables</code> version not support <code>--dport</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Check iptables version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables </span><span class="token parameter variable" style="color:#36acaa">-V</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Version of &#x27;iptables v1.8.7 (nf_tables)&#x27; does not support &#x27;--dport&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Solution:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Switch version. In the three options, choose &#x27;legacy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> update-alternatives </span><span class="token parameter variable" style="color:#36acaa">--config</span><span class="token plain"> iptables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># verify (success with no error)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> nat </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"> OUTPUT </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> tcp </span><span class="token parameter variable" style="color:#36acaa">--dport</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10351</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-j</span><span class="token plain"> DNAT </span><span class="token parameter variable" style="color:#36acaa">--to</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$CLOUDCOREIPS</span><span class="token plain">:10003</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-20-report-token-format-error-after-keadm-join">Question 20: Report &#x27;token format error&#x27; after &#x27;keadm join&#x27;<a href="#question-20-report-token-format-error-after-keadm-join" class="hash-link" aria-label="Direct link to Question 20: Report &#x27;token format error&#x27; after &#x27;keadm join&#x27;" title="Direct link to Question 20: Report &#x27;token format error&#x27; after &#x27;keadm join&#x27;">​</a></h2>
<p>After executing command <code>keadm join --cloudcore-ipport=114.212.81.11:10000 --kubeedge-version=1.9.2 --token=……</code>, <code>journalctl -u edegecore.service -f</code>report error of token format.</p>
<p><strong>Solution:</strong></p>
<p>Token is error or expired when joining. Therefore, get the latest token from cloud and redo from <code>keadm reset</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-21-report-mapping-errors-after-restart-edgecoreservice">Question 21: Report mapping errors after restart edgecore.service<a href="#question-21-report-mapping-errors-after-restart-edgecoreservice" class="hash-link" aria-label="Direct link to Question 21: Report mapping errors after restart edgecore.service" title="Direct link to Question 21: Report mapping errors after restart edgecore.service">​</a></h2>
<p>After executing command <code>systemctl restart edgecore.service</code> to restart edgecore, <code>journalctl -u edegecore.service -f</code> report mapping error of failing to translate yaml to json.</p>
<p><strong>Solution:</strong></p>
<p>Check the format in file<code>/etc/kubeedge/config/edgecore.yaml</code>. Note that tab is not allowed in YAML files (use space instead).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-22-restart-edgecore-and-find-error-of-connect-refuse">Question 22: Restart edgecore and find error of &#x27;connect refuse&#x27;<a href="#question-22-restart-edgecore-and-find-error-of-connect-refuse" class="hash-link" aria-label="Direct link to Question 22: Restart edgecore and find error of &#x27;connect refuse&#x27;" title="Direct link to Question 22: Restart edgecore and find error of &#x27;connect refuse&#x27;">​</a></h2>
<p>During the startup of EdgeMesh, modify the <code>/etc/kubeedge/config/edgecore.yaml</code> file and restart the service with <code>systemctl restart edgecore.service</code>.
Command <code>journalctl -u edegecore.service -f</code> report an error of &#x27;connect refuse&#x27; and the cloud denies communication.</p>
<p><strong>Solution:</strong></p>
<p>Check the status of <code>cloudcore</code> on cloud:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># check cloudcore status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status cloudcore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># restart cloudcore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart cloudcore.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># check error message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">journalctl </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> cloudcore.service </span><span class="token parameter variable" style="color:#36acaa">-f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An error of <a href="#question-4-10002-already-in-use">Question 4</a> maybe found.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-23-error-of-shutting-down-is-reported-when-deploying-metrics-service">Question 23: Error of &#x27;Shutting down&#x27; is reported when deploying metrics-service<a href="#question-23-error-of-shutting-down-is-reported-when-deploying-metrics-service" class="hash-link" aria-label="Direct link to Question 23: Error of &#x27;Shutting down&#x27; is reported when deploying metrics-service" title="Direct link to Question 23: Error of &#x27;Shutting down&#x27; is reported when deploying metrics-service">​</a></h2>
<p>During the deployment of metrics-service, the port in the <code>components.yaml</code> file is modified to &#x27;4443&#x27;, but metrics-service still failed with error <code>Shutting down RequestHeaderAuthRequestController occurred</code>.</p>
<p><strong>Solution:</strong></p>
<p>When deploying KubeEdge, the port in the metrics-service will be automatically overwritten to &#x27;10250&#x27;. Manually modify the port in <code>components.yaml</code> file to &#x27;10250&#x27;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-24-16925496-1653-io-timeout">Question 24: 169.254.96. 16:53: i/o timeout<a href="#question-24-16925496-1653-io-timeout" class="hash-link" aria-label="Direct link to Question 24: 169.254.96. 16:53: i/o timeout" title="Direct link to Question 24: 169.254.96. 16:53: i/o timeout">​</a></h2>
<p>When a new node joins in the cluster, Sedna will be deployed automatically.
An error is reported in the log of <code>sedna-lc</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client tries to connect global manager(address: gm.sedna:9000) failed, error: dial tcp: lookup gm.sedna on 169.254.96.16:53: read udp 172.17.0.3:49991-&gt;169.254.96.16:53: i/o timeout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Troubleshooting:</strong></p>
<p>First check status of <code>edgemesh-agent</code> on the new node. The error is reported from <code>edgemesh-agent</code>:</p>
<p><img decoding="async" loading="lazy" alt="Q24-1" src="/assets/images/Q24-1-b02734af65fce88ec4459259d817bc36.png" width="1009" height="163" class="img_ev3q"></p>
<p>Use <code>kubectl describe pod &lt;pod-name&gt;</code> and find that assigning to new node is the latest event:</p>
<p><img decoding="async" loading="lazy" alt="Q24-2" src="/assets/images/Q24-2-b2316d2cf4ee1288f5324df9a0da9876.png" width="1082" height="275" class="img_ev3q"></p>
<p>Use <code>journalctl -u edgecore.service -xe</code> on the new node to check errors:</p>
<p><img decoding="async" loading="lazy" alt="Q24-3" src="/assets/images/Q24-3-af894ddc03e47d6514186c0bb7f079ba.png" width="1544" height="127" class="img_ev3q"></p>
<p><strong>Reason:</strong> The new node cannot access dockerhub directly and has not been configured of docker registry. Thus, docker image cannot be pulled.</p>
<p><strong>Solution:</strong> Configure docker registry and restart docker and edgecore. Refer to <a href="/docs/developer-guide/how-to-build/docker-registry/">Docker Registry Configuration</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-25-keadm-join-error-on-edge-nodes">Question 25: keadm join error on edge nodes<a href="#question-25-keadm-join-error-on-edge-nodes" class="hash-link" aria-label="Direct link to Question 25: keadm join error on edge nodes" title="Direct link to Question 25: keadm join error on edge nodes">​</a></h2>
<p>Execution of <code>keadm join</code> on edges reported errors.</p>
<p>Solution: Check the <code>edgecore.yaml</code> file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> /etc/kubeedge/config/edgecore.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Q25" src="/assets/images/Q25-dc68c2dfac16a206d5fd83e3a9d1ba11.png" width="684" height="365" class="img_ev3q"></p>
<p>Add the address of master node (cloud) in edgeHub/httpServer, such as <code>https://114.212.81.11:10002</code>,
delete the redundant &#x27;:&#x27; in websocket/server.</p>
<p>Re-run the <code>keadm join</code> command after modification.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-26-failed-to-build-map-of-initial-containers-from-runtime">Question 26: Failed to build map of initial containers from runtime<a href="#question-26-failed-to-build-map-of-initial-containers-from-runtime" class="hash-link" aria-label="Direct link to Question 26: Failed to build map of initial containers from runtime" title="Direct link to Question 26: Failed to build map of initial containers from runtime">​</a></h2>
<p>Edgecore report error when <code>journalctl -u edgecore.service -f</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">initialize module error: failed to build map of initial containers from runtime: no PodsandBox found with Id &#x27;c45ed1592e75e885e119664d777107645a7e7904703c690664691c61a9f79ed3&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Solution:</strong></p>
<p>Find the docker ID and delete it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--filter</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;label=io.kubernetes.sandbox.id=c45ed1592e75e885e119664d777107645a7e7904703c690664691c61a9f79ed3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># find the related docker ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">docker ID</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-27-certificate-has-expired-or-is-not-yet-valid">Question 27: Certificate has expired or is not yet valid<a href="#question-27-certificate-has-expired-or-is-not-yet-valid" class="hash-link" aria-label="Direct link to Question 27: Certificate has expired or is not yet valid" title="Direct link to Question 27: Certificate has expired or is not yet valid">​</a></h2>
<p>Execution of <code>kubectl get pods -A</code> reports the following error:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Unable to connect to the server: x509: certificate has expired or is not yet valid: current </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain">-06-27T22:23:12+08:00 is after </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain">-06-27T08:56:50Z</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Reason:</strong></p>
<p>Check the certificate of Kubernetes on the cloud server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kubeadm certs check-expiration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the following results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">check-expiration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Reading configuration from the cluster</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">check-expiration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> FYI: You can </span><span class="token function" style="color:#d73a49">look</span><span class="token plain"> at this config </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&#x27;kubectl -n kube-system get cm kubeadm-config -o yaml&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">check-expiration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Error reading configuration from the Cluster. Falling back to default configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CERTIFICATE                EXPIRES                  RESIDUAL TIME   CERTIFICATE AUTHORITY   EXTERNALLY MANAGED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin.conf                 Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                               no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiserver                  Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       ca                      no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiserver-etcd-client      Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiserver-kubelet-client   Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       ca                      no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">controller-manager.conf    Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                               no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-healthcheck-client    Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-peer                  Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-server                Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">front-proxy-client         Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       front-proxy-ca          no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scheduler.conf             Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2025</span><span class="token plain"> 08:56 UTC   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">invalid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                               no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CERTIFICATE AUTHORITY   EXPIRES                  RESIDUAL TIME   EXTERNALLY MANAGED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca                      Jun </span><span class="token number" style="color:#36acaa">25</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2034</span><span class="token plain"> 08:56 UTC   8y              no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-ca                 Jun </span><span class="token number" style="color:#36acaa">25</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2034</span><span class="token plain"> 08:56 UTC   8y              no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">front-proxy-ca          Jun </span><span class="token number" style="color:#36acaa">25</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2034</span><span class="token plain"> 08:56 UTC   8y              no      </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The certificates are in status of <code>&lt;invalid&gt;</code>.</p>
<p><strong>Solution:</strong></p>
<p>Update Kubernetes certificates:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kubeadm certs renew all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the following results:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">renew</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Reading configuration from the cluster</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">renew</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> FYI: You can </span><span class="token function" style="color:#d73a49">look</span><span class="token plain"> at this config </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&#x27;kubectl -n kube-system get cm kubeadm-config -o yaml&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">renew</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Error reading configuration from the Cluster. Falling back to default configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate embedded </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the kubeconfig </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the admin to use and </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> kubeadm itself renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> serving the Kubernetes API renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate the apiserver uses to access etcd renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the API server to connect to kubelet renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate embedded </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the kubeconfig </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the controller manager to use renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> liveness probes to healthcheck etcd renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> etcd nodes to communicate with each other renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> serving etcd renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the front proxy client renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certificate embedded </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the kubeconfig </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the scheduler manager to use renewed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done renewing certificates. You must restart the kube-apiserver, kube-controller-manager, kube-scheduler and etcd, so that they can use the new certificates.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Recheck the certificates, all certificates are updated:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kubeadm certs check-expiration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the following results:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">check-expiration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Reading configuration from the cluster</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">check-expiration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> FYI: You can </span><span class="token function" style="color:#d73a49">look</span><span class="token plain"> at this config </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&#x27;kubectl -n kube-system get cm kubeadm-config -o yaml&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">check-expiration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Error reading configuration from the Cluster. Falling back to default configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CERTIFICATE                EXPIRES                  RESIDUAL TIME   CERTIFICATE AUTHORITY   EXTERNALLY MANAGED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin.conf                 Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d                                    no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiserver                  Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            ca                      no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiserver-etcd-client      Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiserver-kubelet-client   Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            ca                      no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">controller-manager.conf    Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d                                    no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-healthcheck-client    Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-peer                  Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-server                Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            etcd-ca                 no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">front-proxy-client         Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d            front-proxy-ca          no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scheduler.conf             Jun </span><span class="token number" style="color:#36acaa">27</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2026</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:30 UTC   364d                                    no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CERTIFICATE AUTHORITY   EXPIRES                  RESIDUAL TIME   EXTERNALLY MANAGED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca                      Jun </span><span class="token number" style="color:#36acaa">25</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2034</span><span class="token plain"> 08:56 UTC   8y              no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-ca                 Jun </span><span class="token number" style="color:#36acaa">25</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2034</span><span class="token plain"> 08:56 UTC   8y              no      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">front-proxy-ca          Jun </span><span class="token number" style="color:#36acaa">25</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2034</span><span class="token plain"> 08:56 UTC   8y              no      </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, the execution of command  <code>kubectl get pods -A</code> still reports errors:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">error: You must be logged </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> to the server </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Unauthorized</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Renew the configuration file and restart core k8s services to solve:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Backup configuration file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rp</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config.bak</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Renew configuration file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> /etc/kubernetes/admin.conf /root/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Restart kubelet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart kubelet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Restart kube-apiserver, kube-controller-manage, kube-scheduler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kube-apiserver</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> pause</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $1}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> restart </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kube-controller-manage</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> pause</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $1}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> restart </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kube-scheduler</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> pause</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $1}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> restart </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Restart Cloudcore and check the status:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Restart Cloudcore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart cloudcore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check Cloudcore status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status cloudcore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">journalctl </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> cloudcore </span><span class="token parameter variable" style="color:#36acaa">-xe</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If Cloudcore has the following errors:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore.service: Main process exited, </span><span class="token assign-left variable" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:#36acaa">status</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/INVALIDARGUMENT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- A start job </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> unit cloudcore.service has finished successfully.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- The job identifier is </span><span class="token number" style="color:#36acaa">2357999</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:15 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: W0630 00:45:15.125171 </span><span class="token number" style="color:#36acaa">3159196</span><span class="token plain"> validation.go:154</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TLSTunnelPrivateKeyFile does not exist i</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:15 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: W0630 00:45:15.125269 </span><span class="token number" style="color:#36acaa">3159196</span><span class="token plain"> validation.go:157</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TLSTunnelCertFile does not exist </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /etc</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:15 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: W0630 00:45:15.125286 </span><span class="token number" style="color:#36acaa">3159196</span><span class="token plain"> validation.go:160</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> TLSTunnelCAFile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">does not exist </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /etc/k</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:15 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: I0630 00:45:15.125336 </span><span class="token number" style="color:#36acaa">3159196</span><span class="token plain"> server.go:77</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Version: v1.9.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: panic: failed to create system namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: goroutine </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">running</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">github.com/kubeedge/kubeedge/cloud/cmd/cloudcore/app.NewCloudCoreCommand.func1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0xc00035f</span><span class="token operator file-descriptor important" style="color:#393A34">8</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: /root/kubeedge/cloud/cmd/cloudcore/app/server.go:85 +0x81c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: github.com/spf13/cobra.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*Command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0xc00035f8c0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0xc00003c1f0, 0x0, 0x0, 0xc00035f</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: /root/kubeedge/vendor/github.com/spf13/cobra/command.go:854</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+0x2c2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: github.com/spf13/cobra.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*Command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.ExecuteC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0xc00035f8c0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0xc000180058, 0x1859280, 0x0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: /root/kubeedge/vendor/github.com/spf13/cobra/command.go:958</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+0x375</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: github.com/spf13/cobra.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*Command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: /root/kubeedge/vendor/github.com/spf13/cobra/command.go:895</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: main.main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge cloudcore</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3159196</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: /root/kubeedge/cloud/cmd/cloudcore/cloudcore.go:16 +0x65</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">月 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> 00:45:16 cloud.kubeedge systemd</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: cloudcore.service: Main process exited, </span><span class="token assign-left variable" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">exited,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">status</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/INVALIDARGUMENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Subject: Unit process exited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Defined-By: systemd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Support: http://www.ubuntu.com/support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- An </span><span class="token assign-left variable" style="color:#36acaa">ExecStart</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process belonging to unit cloudcore.service has exited.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- The process</span><span class="token string" style="color:#e3116c">&#x27; exit code is &#x27;</span><span class="token plain">exited</span><span class="token string" style="color:#e3116c">&#x27; and its exit status is 2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">6月 30 00:45:16 cloud.kubeedge systemd[1]: cloudcore.service: Failed with result &#x27;</span><span class="token plain">exit-code</span><span class="token string" style="color:#e3116c">&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">-- Subject: Unit failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">-- Defined-By: systemd</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">-- Support: http://www.ubuntu.com/support</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">-- The unit cloudcore.service has entered the &#x27;</span><span class="token plain">failed</span><span class="token string" style="color:#e3116c">&#x27; state with result &#x27;</span><span class="token plain">exit-code&#x27;.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>Try to update Cloudcore certs:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Modify the ip address of &#x27;--adverse-address&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keadm init --advertise-address</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">114.212</span><span class="token plain">.81.11 --kubeedge-version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.9</span><span class="token plain">.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check Cloudcore status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">journalctl </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> cloudcore </span><span class="token parameter variable" style="color:#36acaa">-xe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># if Cloudcore journal report port connection refused, kill the occupied process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lsof</span><span class="token plain"> -i:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-9</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">pid</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Remember to modify <code>cloudcore.yaml</code> as <a href="/docs/getting-started/install-lower-layer-system/install-kubeedge#configure-cloudcore">[Install KubeEdge]</a> shows after <code>keadm init</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="question-28-connection-refused-in-dayu-containers">Question 28: Connection refused in dayu containers<a href="#question-28-connection-refused-in-dayu-containers" class="hash-link" aria-label="Direct link to Question 28: Connection refused in dayu containers" title="Direct link to Question 28: Connection refused in dayu containers">​</a></h2>
<p>In dayu system containers, connection refused error is reported when accessing services, but the pods are normal and logs show no error.</p>
<p><strong>Reason:</strong></p>
<p>Check the status of <code>edgemesh-agent</code> on edge nodes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> kubeedge </span><span class="token parameter variable" style="color:#36acaa">-owide</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> kubeedge edgemesh-agent-xxxxx </span><span class="token comment" style="color:#999988;font-style:italic"># xxxxx is the pod name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>From the edgemesh-agent logs, we can see that service port conflict happens, then check iptables on edge nodes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> nat </span><span class="token parameter variable" style="color:#36acaa">-nvL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Redundant iptable rules are recorded in <code>KUBE-NODEPORT-CONTAINER</code>, <code>KUBE-NODEPORT-HOST</code>, <code>KUBE-PORTALS-CONTAINER</code> and <code>KUBE-PORTALS-HOST</code> (which are residual after stop system).</p>
<p><strong>Solution:</strong></p>
<p>Temporarily, flush edgecore database on edge node (it may cause data loss):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Stop edgecore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl stop edgecore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Backup kubeedge data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-czf</span><span class="token plain"> /tmp/kubeedge-backup-</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa"> +%F-%H%M%S</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">.tgz /var/lib/kubeedge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Flush kubeedge data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> /var/lib/kubeedge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /var/lib/kubeedge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> root:root /var/lib/kubeedge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Start edgecore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start edgecore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check edgecore status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> journalctl </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> edgecore </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> --no-pager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Another temporary solution is to reinstall kubeedge on edge node as <a href="/docs/getting-started/install-lower-layer-system/install-kubeedge#join-kubeedge-cluster-edge">instruction</a> shows.</p>
<p>Permanently, this error has been fixed after dayu v1.3 release. Use the latest <a href="https://github.com/dayu-autostreamer/dayu/blob/main/dayu.sh" target="_blank" rel="noopener noreferrer">dayu script</a> can avoid this error.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/dayu-autostreamer/dayu-autostreamer.github.io/tree/main/docs/03-getting-started/02-install-lower-layer-system/08-faqs.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-01-27T13:42:25.000Z" itemprop="dateModified">Jan 27, 2026</time></b> by <b>onecheck</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started/install-lower-layer-system/common-commands"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Common Commands</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/getting-started/start-upper-layer-system"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Start Upper Layer System</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#question-1-kube-proxy-report-iptables-problems" class="table-of-contents__link toc-highlight">Question 1: kube-proxy report iptables problems</a></li><li><a href="#question-2-calico-and-coredns-are-always-in-initializing-state" class="table-of-contents__link toc-highlight">Question 2: calico and coredns are always in initializing state</a></li><li><a href="#question-3-metrics-server-keeps-unsuccessful-state" class="table-of-contents__link toc-highlight">Question 3: metrics-server keeps unsuccessful state</a></li><li><a href="#question-4-10002-already-in-use" class="table-of-contents__link toc-highlight">Question 4: 10002 already in use</a></li><li><a href="#question-5-edgecore-file-exists" class="table-of-contents__link toc-highlight">Question 5: edgecore file exists</a></li><li><a href="#question-6-tlsstreamprivatekeyfile-not-exist" class="table-of-contents__link toc-highlight">Question 6: TLSStreamPrivateKeyFile not exist</a></li><li><a href="#question-7-edgemesh-has-successful-edge-edge-but-failed-cloud-edge-connection" class="table-of-contents__link toc-highlight">Question 7: EdgeMesh has successful edge-edge but failed cloud-edge connection</a></li><li><a href="#question-8-gpu-is-not-found-on-master" class="table-of-contents__link toc-highlight">Question 8: GPU is not found on master</a></li><li><a href="#question-9-cannot-find-gpu-resources-in-jetson" class="table-of-contents__link toc-highlight">Question 9: cannot find GPU resources in jetson</a></li><li><a href="#question-10-lc12700-5353-no-such-hostconnection-refused" class="table-of-contents__link toc-highlight">Question 10: lc127.0.0. 53:53 no such host/connection refused</a></li><li><a href="#question-11-1692549616-such-host" class="table-of-contents__link toc-highlight">Question 11: 169.254.96.16 such host</a></li><li><a href="#question-12-kubectl-logs-pod-name-timeout" class="table-of-contents__link toc-highlight">Question 12: <code>kubectl logs &lt;pod-name&gt;</code> timeout</a></li><li><a href="#question-13-stuck-in-kubectl-logs-pod-name" class="table-of-contents__link toc-highlight">Question 13: Stuck in <code>kubectl logs &lt;pod-name&gt;</code></a></li><li><a href="#question-14-cloudcore-reports-certficate-error" class="table-of-contents__link toc-highlight">Question 14: CloudCore reports certficate error</a></li><li><a href="#question-15-deleting-namespace-stucks-in-terminating-state" class="table-of-contents__link toc-highlight">Question 15: deleting namespace stucks in terminating state</a></li><li><a href="#question-16-deployment-failed-after-forcibly-deleting-pod" class="table-of-contents__link toc-highlight">Question 16: Deployment failed after forcibly deleting pod</a></li><li><a href="#question-17-after-deleting-deployments-and-pods-the-pods-still-restart-automatically" class="table-of-contents__link toc-highlight">Question 17: After deleting deployments and pods, the pods still restart automatically</a></li><li><a href="#question-18-large-scale-evicted-disk-pressure" class="table-of-contents__link toc-highlight">Question 18: Large-scale Evicted (disk pressure)</a></li><li><a href="#question-19-executing-iptables-report-that-system-does-not-support---dport" class="table-of-contents__link toc-highlight">Question 19: Executing &#39;iptables&#39; report that system does not support &#39;--dport&#39;</a></li><li><a href="#question-20-report-token-format-error-after-keadm-join" class="table-of-contents__link toc-highlight">Question 20: Report &#39;token format error&#39; after &#39;keadm join&#39;</a></li><li><a href="#question-21-report-mapping-errors-after-restart-edgecoreservice" class="table-of-contents__link toc-highlight">Question 21: Report mapping errors after restart edgecore.service</a></li><li><a href="#question-22-restart-edgecore-and-find-error-of-connect-refuse" class="table-of-contents__link toc-highlight">Question 22: Restart edgecore and find error of &#39;connect refuse&#39;</a></li><li><a href="#question-23-error-of-shutting-down-is-reported-when-deploying-metrics-service" class="table-of-contents__link toc-highlight">Question 23: Error of &#39;Shutting down&#39; is reported when deploying metrics-service</a></li><li><a href="#question-24-16925496-1653-io-timeout" class="table-of-contents__link toc-highlight">Question 24: 169.254.96. 16:53: i/o timeout</a></li><li><a href="#question-25-keadm-join-error-on-edge-nodes" class="table-of-contents__link toc-highlight">Question 25: keadm join error on edge nodes</a></li><li><a href="#question-26-failed-to-build-map-of-initial-containers-from-runtime" class="table-of-contents__link toc-highlight">Question 26: Failed to build map of initial containers from runtime</a></li><li><a href="#question-27-certificate-has-expired-or-is-not-yet-valid" class="table-of-contents__link toc-highlight">Question 27: Certificate has expired or is not yet valid</a></li><li><a href="#question-28-connection-refused-in-dayu-containers" class="table-of-contents__link toc-highlight">Question 28: Connection refused in dayu containers</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/why-dayu">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developer-guide">Development</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dayu-autostreamer/dayu/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community/contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community/contact-us">Contact Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dayu-autostreamer/dayu" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Dayu Project Authors. All rights reserved.</div></div></div></footer></div>
<!-- Default Statcounter code for dayu website -->
<script>var sc_project=13194138,sc_invisible=1,sc_security="d4073d04"</script>
<script src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank" rel="noopener noreferrer"><img class="statcounter" src="https://c.statcounter.com/13194138/0/d4073d04/1/" alt="Web Analytics" referrerpolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code --></body>
</html>